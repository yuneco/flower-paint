var ve=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ee=(t,e,o)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,te=(t,e)=>{for(var o in e||(e={}))ge.call(e,o)&&ee(t,o,e[o]);if(Y)for(var o of Y(e))ye.call(e,o)&&ee(t,o,e[o]);return t};import{d as X,r as L,a as F,w as x,b as I,o as be,c as r,e as m,f as g,g as p,h as $e,i as $,j as _,k as M,t as P,n as R,l as E,u,m as k,p as A,q as K,s as oe,F as ae,v as we,x as Ie,y as Ve,z as B,A as ne,B as le,C as se,D as Ce,T as ie,E as ce,G as xe,H as Se,I as ke,J as Ae}from"./vendor.9d317405.js";const Te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=o(l);fetch(l.href,n)}};Te();const z=X("canvas",{state:()=>({penColor:"#3399aa",penCount:[6,0],isKaleido:[!0,!0],penWidth:20,isStraight:!1,isEraser:!1,penOpacity:100,tool:"draw"})}),U={min:1,max:16},Z={min:2,max:16},D=(t,e,o)=>Math.max(e,Math.min(o,t)),q=(t,e,o=0)=>o+Math.round((t-o)/e)*e,Le=()=>{const t=z(),e=l=>{const[n,i]=t.$state.penCount;if(i){const c=D(i+(l?1:-1),Z.min,Z.min);t.$state.penCount=[n,c]}else{const c=D(n+(l?1:-1),U.min,U.max);t.$state.penCount=[c,i]}};return{penCountUp:()=>e(!0),penCountDown:()=>e(!1)}},O=L(),G=L(),de=t=>{var e,o,a;t.key==="ArrowUp"&&((e=G.value)==null||e.penCountUp()),t.key==="ArrowDown"&&((o=G.value)==null||o.penCountDown()),t.key==="z"&&t.metaKey&&((a=O.value)==null||a.undo())};window.removeEventListener("keydown",de);window.addEventListener("keydown",de);const Me=t=>{const e=z();G.value=Le(),!!O.value&&console.warn("SymPaint init called multiple times.");const a=new F.exports.PaintCanvas(t,t.offsetWidth,t.offsetHeight);a.penCount=e.penCount,a.penColor=e.penColor,a.penWidth=e.penWidth,a.tool=e.isStraight?"draw:line":"draw",a.isKaleido=e.isKaleido,a.penKind=e.isEraser?"eraser":"normal",a.listenRequestZoom(n=>{a.coord=a.coord.clone({scale:n})}),a.listenRequestScrollTo(({point:n,target:i})=>{i==="canvas"&&(a.coord=a.coord.clone({scroll:n})),i==="anchor"&&(a.activeAnchor=a.activeAnchor.clone({scroll:n}))}),a.listenRequestRotateTo(({angle:n,target:i})=>{i==="canvas"&&(a.coord=a.coord.clone({angle:n})),i==="anchor"&&(a.activeAnchor=a.activeAnchor.clone({angle:n}))}),a.listenRequestUndo(()=>{a.undo()}),a.listenRequestAnchorTransform(n=>{a.activeAnchor=n}),a.listenRequestAnchorReset(()=>{a.anchor=new F.exports.Coordinate}),new F.exports.utils.ToolKeyWatcher().listenChange(n=>e.tool=n),x(()=>[e.$state.penColor],()=>{a.penColor=e.$state.penColor}),x(()=>[e.$state.penCount],()=>{a.penCount=e.$state.penCount,e.$state.penCount[0]===1&&(a.isKaleido=[!1,e.$state.isKaleido[1]])}),x(()=>[e.$state.penWidth],()=>{a.penWidth=e.$state.penWidth}),x(()=>[e.$state.isStraight],()=>{a.tool=e.isStraight?"draw:line":"draw"}),x(()=>[e.$state.isKaleido],()=>{a.isKaleido=e.isKaleido,e.$state.penCount[0]===1&&(a.isKaleido=[!1,e.$state.isKaleido[1]])}),x(()=>[e.$state.isEraser],()=>{a.penKind=e.isEraser?"eraser":"normal"}),x(()=>[e.$state.penOpacity],()=>{a.penAlpha=e.$state.penOpacity/100}),x(()=>[e.$state.tool],()=>{a.tool=e.$state.tool}),O.value=a},re=()=>({state:z().$state,init:e=>Me(e),toImgBlob:()=>{var e;return(e=O.value)==null?void 0:e.toImgBlob()}});var C=(t,e)=>{const o=t.__vccOpts||t;for(const[a,l]of e)o[a]=l;return o};const Pe=I({setup(t){const e=L(),{init:o}=re();return be(()=>{const a=e.value;!a||(a.addEventListener("touchmove",l=>{l.preventDefault()}),o(a))}),(a,l)=>(r(),m("div",{ref:(n,i)=>{i.el=n,e.value=n},class:"PaintCanvas"},null,512))}});var Ee=C(Pe,[["__scopeId","data-v-0ebaceef"]]);const j=async t=>new Promise(e=>{setTimeout(e,t)}),Be={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},De=p("rect",{width:"128",height:"128",fill:"none"},null,-1),Re=["fill"],Ke=["fill"],ze=["fill"],Ue=["fill"],Ze=["fill"],Oe=["fill"],We=["fill"],He=["fill"],Ne=$e(`<path d="M86.9,56.7c-7,0-12.7,5.7-12.7,12.7c0,7,5.7,12.7,12.7,12.7c0,0,0,0,0,0c7,0,12.7-5.7,12.7-12.7
		C99.6,62.4,94,56.7,86.9,56.7z"></path><path d="M56.2,56.7c-7,0-12.7,5.7-12.7,12.7c0,7,5.7,12.7,12.7,12.7c0,0,0,0,0,0c7,0,12.7-5.7,12.7-12.7
		C68.9,62.4,63.3,56.7,56.2,56.7z"></path><path d="M48.3,48.3c4.8,0,8.7-3.9,8.7-8.7c0-4.8-3.9-8.7-8.7-8.7c-4.8,0-8.7,3.9-8.7,8.7C39.6,44.4,43.5,48.3,48.3,48.3
		C48.3,48.3,48.3,48.3,48.3,48.3z"></path><path d="M98.5,30.8c-4.8,0-8.7,3.9-8.7,8.7c0,4.8,3.9,8.7,8.7,8.7c0,0,0,0,0,0c4.8,0,8.7-3.9,8.7-8.7
		C107.2,34.7,103.3,30.8,98.5,30.8z"></path><path d="M82.2,39.5c0-4.8-3.9-8.7-8.7-8.7c-4.8,0-8.7,3.9-8.7,8.7c0,4.8,3.9,8.7,8.7,8.7c0,0,0,0,0,0
		C78.3,48.3,82.2,44.4,82.2,39.5z"></path><path d="M115.2,6.1H12.8c-3.7,0-6.6,3-6.6,6.6v102.5c0,3.7,3,6.6,6.6,6.6h102.5c3.7,0,6.6-3,6.6-6.6V12.8
		C121.9,9.1,118.9,6.1,115.2,6.1z M108.6,60.6c-2.2,2.3-3.6,5.4-3.6,8.8s1.4,6.6,3.6,8.8v6.8c-9,1-16.4,7.3-19.1,15.7
		c-2.9-9.2-11.6-15.8-21.7-15.8c-10.1,0-18.7,6.6-21.7,15.8c-3-9.2-11.6-15.8-21.7-15.8c-1.7,0-3.4,0.2-5,0.6v-4.9
		c1.8,1,3.9,1.6,6.1,1.6c0,0,0,0,0,0c7,0,12.7-5.7,12.7-12.7c0-7-5.7-12.7-12.7-12.7c-2.2,0-4.3,0.6-6.1,1.6v-11
		c1.2,0.6,2.4,0.9,3.8,0.9c0,0,0,0,0,0c4.8,0,8.7-3.9,8.7-8.7c0-4.8-3.9-8.7-8.7-8.7c-1.4,0-2.7,0.3-3.8,0.9v-8.1
		c2.1-0.4,3.6-2.1,4-4.2h8.4c0.4,2.4,2.5,4.3,5,4.3s4.6-1.9,5-4.3h8.4c0.4,2.4,2.5,4.3,5,4.3s4.6-1.9,5-4.3h8.4
		c0.4,2.4,2.5,4.3,5,4.3s4.6-1.9,5-4.3h8.4c0.4,2.4,2.4,4.2,4.9,4.3c0,0,0.1,0,0.1,0c2.5,0,4.6-1.9,5-4.3h8.3
		c0.3,1.8,1.5,3.3,3.1,3.9V60.6z"></path>`,6),Xe=[Ne],Fe=["fill"],qe=["fill"],Ge=p("rect",{x:"11.13",y:"16.45",width:"104.97",height:"14.33",rx:"3.2"},null,-1),je=p("rect",{x:"10.47",y:"42",width:"105.63",height:"21.62",rx:"3.2"},null,-1),Je=p("rect",{x:"10.47",y:"80.06",width:"105.63",height:"31.46",rx:"3.2"},null,-1),Qe=[Ge,je,Je],Ye=["fill"],et=p("path",{d:"M69,33.7H59a6.6,6.6,0,0,0,0,13.2H69a1.44,1.44,0,0,1,1.55,1.26v52.28A1.45,1.45,0,0,1,69,101.7H14.75a1.45,1.45,0,0,1-1.55-1.26V48.16a1.44,1.44,0,0,1,1.55-1.26h10a6.6,6.6,0,1,0,0-13.2h-10A14.62,14.62,0,0,0,0,48.16v52.28A14.63,14.63,0,0,0,14.75,114.9H69a14.63,14.63,0,0,0,14.75-14.46V48.16A14.62,14.62,0,0,0,69,33.7Z"},null,-1),tt=p("path",{d:"M27.11,28.19a6.58,6.58,0,0,0,4.67-1.93l3.49-3.49V69.83a6.6,6.6,0,0,0,13.2,0V22.29L52,25.78a6.6,6.6,0,0,0,9.33-9.33L46.77,1.93a6.61,6.61,0,0,0-9.33,0l-15,15a6.6,6.6,0,0,0,4.66,11.27Z"},null,-1),ot=[et,tt],at=["fill"],nt=p("path",{d:"M30.16,65.34a8.73,8.73,0,1,1,8.73,8.72A8.73,8.73,0,0,1,30.16,65.34Z"},null,-1),lt=p("path",{d:"M56.27,65.34A8.73,8.73,0,1,1,65,74.06,8.72,8.72,0,0,1,56.27,65.34Z"},null,-1),st=p("path",{d:"M82.37,65.34a8.73,8.73,0,1,1,8.72,8.72A8.72,8.72,0,0,1,82.37,65.34Z"},null,-1),it=[nt,lt,st],ue=I({props:{symbol:null,color:{default:"#444"}},setup(t){return(e,o)=>(r(),m("svg",Be,[De,t.symbol==="2nd"?(r(),m("path",{key:0,fill:t.color,d:"M119.81,64a6.5,6.5,0,0,0-6.5-6.5h-1l.52-.91a6.5,6.5,0,1,0-11.26-6.5L101,51l-.52-.91a6.52,6.52,0,0,0-7.5-3,6.49,6.49,0,0,0,1.18-8l-.53-.91h1a6.5,6.5,0,0,0,0-13h-1l.53-.9a6.5,6.5,0,1,0-11.26-6.5l-.52.9-.53-.9a6.5,6.5,0,1,0-11.26,6.5l.53.9h-1a6.51,6.51,0,0,0-6.32,5,6.51,6.51,0,0,0-6.32-5h-1l.52-.9a6.5,6.5,0,1,0-11.26-6.5l-.52.9-.53-.9a6.5,6.5,0,1,0-11.26,6.5l.53.9H32.83a6.5,6.5,0,1,0,0,13h1.05l-.53.91a6.49,6.49,0,0,0,1.18,8,6.51,6.51,0,0,0-7.5,3l-.52.91L26,50.09a6.5,6.5,0,1,0-11.26,6.5l.52.91h-1a6.5,6.5,0,0,0,0,13h1l-.52.91a6.49,6.49,0,0,0,2.38,8.87,6.37,6.37,0,0,0,3.24.88A6.52,6.52,0,0,0,26,77.91l.52-.91.52.91a6.52,6.52,0,0,0,5.64,3.25,6.28,6.28,0,0,0,1.86-.29,6.51,6.51,0,0,0-1.18,8l.53.91H32.83a6.5,6.5,0,0,0,0,13h1.05l-.53.9a6.51,6.51,0,0,0,2.38,8.88,6.48,6.48,0,0,0,8.88-2.38l.53-.9.52.9a6.5,6.5,0,0,0,11.26-6.5l-.52-.9h1a6.51,6.51,0,0,0,6.32-5,6.51,6.51,0,0,0,6.32,5h1l-.53.9A6.5,6.5,0,0,0,73,112.54a6.41,6.41,0,0,0,3.25.88,6.49,6.49,0,0,0,5.63-3.26l.53-.9.52.9a6.5,6.5,0,0,0,11.26-6.5l-.53-.9h1a6.5,6.5,0,0,0,0-13h-1l.53-.91a6.5,6.5,0,0,0-1.18-8,6.28,6.28,0,0,0,1.86.29,6.52,6.52,0,0,0,5.64-3.25L101,77l.52.91a6.52,6.52,0,0,0,5.64,3.25,6.37,6.37,0,0,0,3.24-.88,6.48,6.48,0,0,0,2.38-8.87l-.52-.91h1A6.5,6.5,0,0,0,119.81,64Zm-56,30.76a6.5,6.5,0,0,0-6.32-5h-1l.52-.91a6.5,6.5,0,0,0-11.26-6.5l-.52.91-.53-.91a6.49,6.49,0,0,0-7.49-3,6.49,6.49,0,0,0,1.17-8l-.52-.91h1a6.5,6.5,0,0,0,0-13h-1l.52-.91a6.51,6.51,0,0,0-1.17-8A6.23,6.23,0,0,0,39,48.9a6.5,6.5,0,0,0,5.63-3.25l.53-.91.52.91a6.5,6.5,0,0,0,11.26-6.5l-.52-.91h1a6.5,6.5,0,0,0,6.32-5,6.5,6.5,0,0,0,6.32,5h1l-.53.91a6.5,6.5,0,0,0,11.26,6.5l.53-.91.52.91a6.5,6.5,0,0,0,5.63,3.25,6.34,6.34,0,0,0,1.87-.29,6.5,6.5,0,0,0-1.18,8l.52.91h-1a6.5,6.5,0,1,0,0,13h1l-.52.91a6.49,6.49,0,0,0,1.17,8,6.49,6.49,0,0,0-7.49,3l-.52.91-.53-.91a6.5,6.5,0,0,0-11.26,6.5l.53.91h-1A6.5,6.5,0,0,0,63.76,94.76Z"},null,8,Re)):g("",!0),t.symbol==="count"?(r(),m("path",{key:1,fill:t.color,d:"M113,56.36H74.79L93.9,23.27a6.81,6.81,0,0,0-11.8-6.8L63,49.55,43.9,16.47a6.81,6.81,0,0,0-11.8,6.8L51.21,56.36H13A6.81,6.81,0,0,0,13,70H51.21L32.1,103.07a6.81,6.81,0,0,0,11.8,6.81L63,76.79l19.1,33.09a6.81,6.81,0,0,0,5.91,3.4,6.81,6.81,0,0,0,5.89-10.21L74.79,70H113a6.81,6.81,0,0,0,0-13.62Z"},null,8,Ke)):g("",!0),t.symbol==="eraser"?(r(),m("path",{key:2,fill:t.color,d:"M118.24,48.91,81,11.43a6.46,6.46,0,0,0-9.15,0L9.69,73.13a6.43,6.43,0,0,0-1.91,4.56,6.5,6.5,0,0,0,1.87,4.59l37.21,37.48a6.48,6.48,0,0,0,4.6,1.91A6.41,6.41,0,0,0,56,119.79L118.2,58.06a6.43,6.43,0,0,0,1.91-4.56A6.5,6.5,0,0,0,118.24,48.91ZM76.4,25.14l8.3,8.36L48.57,69.36,40.27,61ZM51.49,106.05,23.4,77.75l7.69-7.63,28.09,28.3ZM68.36,89.31,60.06,81,96.2,45.08l8.29,8.36Z"},null,8,ze)):g("",!0),t.symbol==="freehand"?(r(),m("path",{key:3,fill:t.color,d:"M18.55,118.29a6.63,6.63,0,0,1-6.63-6.43c-1-31,24.9-42.16,47.73-52C82.65,50,102.51,41.4,102,16.48a6.64,6.64,0,0,1,6.5-6.77h.14a6.64,6.64,0,0,1,6.63,6.5C116,50.06,88.83,61.74,64.9,72.05c-25.14,10.83-40.36,18.89-39.72,39.4a6.64,6.64,0,0,1-6.42,6.84Z"},null,8,Ue)):g("",!0),t.symbol==="line"?(r(),m("path",{key:4,fill:t.color,d:"M16.36,119.08a6.63,6.63,0,0,1-4.82-11.19l90.08-95.32a6.64,6.64,0,1,1,9.64,9.12L21.18,117A6.61,6.61,0,0,1,16.36,119.08Z"},null,8,Ze)):g("",!0),t.symbol==="mode_kaleido"?(r(),m("path",{key:5,fill:t.color,d:"M115.67,47a34.49,34.49,0,0,0-27.81-7.24,51.67,51.67,0,0,0-17,6A43.92,43.92,0,0,0,67,27.46C62.64,17.65,54.54,10,45.38,7.07,39,5,32.68,5.44,27.7,8.31c-5.34,3.08-9.15,9-10.45,16.3a34.47,34.47,0,0,0,7.64,27.7,51.54,51.54,0,0,0,14.34,12A44.11,44.11,0,0,0,25.38,76.8c-6.29,8.72-8.84,19.54-6.83,29,1.41,6.59,4.94,11.81,9.92,14.69A20.21,20.21,0,0,0,38.63,123a27.09,27.09,0,0,0,9.18-1.67A34.49,34.49,0,0,0,68,100.88a51.84,51.84,0,0,0,3.23-17.65,43.82,43.82,0,0,0,17.1,5.41,40.94,40.94,0,0,0,4.13.21c9.25,0,18.13-3.15,24.35-8.77,5-4.52,7.77-10.18,7.77-15.94C124.56,58,121.32,51.71,115.67,47ZM35.09,43.83A21.06,21.06,0,0,1,30.31,27c.59-3.32,2.13-6.06,4-7.15a6.43,6.43,0,0,1,3.21-.75,12.34,12.34,0,0,1,3.76.65c4.36,1.41,10.23,5.61,13.63,13.19a33.18,33.18,0,0,1,.93,23.94A38.88,38.88,0,0,1,35.09,43.83ZM55.53,96.28A21.06,21.06,0,0,1,43.3,108.87c-3.17,1.14-6.31,1.18-8.2.09-1.66-1-3-3.14-3.57-6-1-4.48-.25-11.67,4.61-18.41A33.14,33.14,0,0,1,56.41,71.8,38.93,38.93,0,0,1,55.53,96.28Zm52.37-26c-3.4,3.07-10,6-18.25,5.21A33.14,33.14,0,0,1,68.46,64.27,38.88,38.88,0,0,1,90.1,52.79a21.09,21.09,0,0,1,17,4.3c2.57,2.17,4.17,4.87,4.17,7C111.29,66.07,110.05,68.28,107.9,70.23Z"},null,8,Oe)):g("",!0),t.symbol==="mode_mirror"?(r(),m("path",{key:6,fill:t.color,d:"M118.53,62.47a6.64,6.64,0,0,0-11.76,6.16,8.26,8.26,0,0,1-.26,8.74c-2.1,3.19-6.06,4.89-10.56,4.53-9.43-.74-22.73-11.19-27.28-15.35,1.26-6.29,4.43-25.76-1.54-38.36-4-8.39-11.77-13.93-20.35-14.47A21.66,21.66,0,0,0,27.05,24a6.63,6.63,0,1,0,11.19,7.13A8.25,8.25,0,0,1,46,27c3.82.23,7.25,2.82,9.19,6.9,3.92,8.28,1.75,24.24.39,30.7-5.9,2-24.6,9.05-32.57,20.65-5.26,7.66-6.14,17.18-2.29,24.87A21.6,21.6,0,0,0,39.41,122h.28A6.63,6.63,0,0,0,40,108.75a8.27,8.27,0,0,1-7.43-4.6c-1.7-3.42-1.2-7.68,1.37-11.41,5.22-7.6,20.28-13.77,26.48-15.8C64.56,80.67,80.49,94,94.91,95.13c.72.05,1.43.08,2.14.08a24.38,24.38,0,0,0,20.54-10.54A21.61,21.61,0,0,0,118.53,62.47Z"},null,8,We)):g("",!0),t.symbol==="opacity"?(r(),m("g",{key:7,fill:t.color},Xe,8,He)):g("",!0),t.symbol==="pen"?(r(),m("path",{key:8,fill:t.color,d:"M117.8,35.64,91.86,9.89A6.65,6.65,0,0,0,87.28,8a6.47,6.47,0,0,0-4.56,1.91l-65.5,66a6.4,6.4,0,0,0-1.73,3.21l-7.06,33A6.46,6.46,0,0,0,14.75,120a6.66,6.66,0,0,0,1.4-.15l33-7.3a6.47,6.47,0,0,0,3.19-1.76l65.5-66A6.46,6.46,0,0,0,117.8,35.64ZM44.5,100.33l-10.86,2.4-8.21-8.29,2.29-10.76L87.34,23.61l16.77,16.65Z"},null,8,Fe)):g("",!0),t.symbol==="width"?(r(),m("g",{key:9,fill:t.color},Qe,8,qe)):g("",!0),t.symbol==="export"?(r(),m("g",{key:10,fill:t.color,transform:"translate(22 6)"},ot,8,Ye)):g("",!0),t.symbol==="other"?(r(),m("g",{key:11,fill:t.color},it,8,at)):g("",!0)]))}});const ct={key:0,class:"icon"},dt={class:"content"},rt={key:1,class:"label"},ut=I({props:{icon:null,label:null,checked:{type:Boolean,default:!1},edge:{default:"both"},disabled:{type:Boolean,default:!1},enableFlash:{type:Boolean,default:!0}},emits:["check"],setup(t,{emit:e}){const o=t,a=L(!1),l=async()=>{const i=!o.checked;e("check",i),i&&o.enableFlash&&(a.value=!0,await j(100),a.value=!1)},n=$(()=>({borderRadius:{left:[!0,!1,!1,!0],right:[!1,!0,!0,!1],both:[!0,!0,!0,!0],none:[!1,!1,!1,!1]}[o.edge].map(c=>c?"4px":"0").join(" "),borderRightWidth:o.edge==="right"||o.edge==="both"?"1px":"0"}));return(i,c)=>(r(),m("button",{class:R(["PaletteItem",{PaletteItem__disabled:t.disabled,PaletteItem__checked:t.checked,PaletteItem__flash:a.value}]),style:E(te({},u(n))),onPointerdown:l},[t.icon?(r(),m("span",ct,[_(ue,{symbol:t.icon},null,8,["symbol"])])):g("",!0),p("div",dt,[M(i.$slots,"default",{},void 0,!0)]),t.label?(r(),m("span",rt,P(t.label),1)):g("",!0)],38))}});var W=C(ut,[["__scopeId","data-v-4e006e72"]]);const mt={class:"CheckItem"},J=I({props:{modelValue:{type:Boolean},label:{default:""},icon:null,edge:null},emits:["update:modelValue"],setup(t,{emit:e}){const o=a=>{e("update:modelValue",a)};return(a,l)=>(r(),m("div",mt,[_(W,{label:t.label,icon:t.icon,checked:t.modelValue,edge:t.edge,onCheck:o},{default:k(()=>[M(a.$slots,"default")]),_:3},8,["label","icon","checked","edge"])]))}});const pt=["value"],ht=I({props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:e}){const o=L(),a=()=>{var n;(n=o.value)==null||n.click()},l=n=>{e("update:modelValue",n.target.value)};return(n,i)=>(r(),m("div",{class:"ColorSelector",onClick:a},[p("div",{class:"view",style:E({backgroundColor:t.modelValue})},null,4),p("input",{type:"color",ref:(c,w)=>{w.inp=c,o.value=c},value:t.modelValue,onInput:i[0]||(i[0]=c=>l(c))},null,40,pt)]))}});var _t=C(ht,[["__scopeId","data-v-0ce80f00"]]);const ft={class:"ColorSelectItem"},vt=I({props:{modelValue:null,checked:{type:Boolean,default:!1},icon:null,edge:null},emits:["update:modelValue","update:checked"],setup(t,{emit:e}){const o=t,a=$({get:()=>o.modelValue,set:n=>{e("update:modelValue",n)}}),l=$({get:()=>o.checked,set:n=>{e("update:checked",n)}});return(n,i)=>(r(),m("div",ft,[_(J,{icon:t.icon,edge:t.edge,modelValue:u(l),"onUpdate:modelValue":i[1]||(i[1]=c=>A(l)?l.value=c:null)},{default:k(()=>[_(_t,{modelValue:u(a),"onUpdate:modelValue":i[0]||(i[0]=c=>A(a)?a.value=c:null)},null,8,["modelValue"])]),_:1},8,["icon","edge","modelValue"])]))}});const gt={class:"Slider"},yt={class:"label"},bt={class:"value"},$t=I({props:{min:{default:0},max:{default:100},step:{default:1},modelValue:null,label:{default:""}},emits:["update:modelValue","close"],setup(t,{emit:e}){const o=t,a=120,l=K({isDragging:!1}),n=$(()=>(o.modelValue-o.min)/(o.max-o.min)),i=h=>{const b=D(h.offsetX/a,0,1),y=q(o.min+b*(o.max-o.min),o.step,o.min);e("update:modelValue",y)},c=h=>{i(h),l.isDragging=!0},w=h=>{!l.isDragging||i(h)},V=async h=>{!l.isDragging||(i(h),l.isDragging=!1,await j(200),S())},S=()=>{e("close")};return(h,b)=>(r(),m("div",gt,[p("span",yt,P(t.label),1),p("div",{class:"bar",onPointerdown:c,onPointermove:w,onPointercancel:V,onPointerup:V},[p("div",{class:"fill",style:E({transform:`scaleX(${u(n)})`})},null,4),p("div",bt,P(t.modelValue),1)],32)]))}});var wt=C($t,[["__scopeId","data-v-3f7bb8aa"]]);const me=(t,e,o)=>{document.body.style.cursor="ew-resize";const a=t.screenX;let l=!1;const n=c=>{c.preventDefault();const w=c.screenX-a;e(w),l=!0},i=()=>{document.body.removeEventListener("pointermove",n),document.body.removeEventListener("pointerup",i),document.body.removeEventListener("pointercancel",i),document.body.style.cursor="",o(l)};document.body.addEventListener("pointermove",n),document.body.addEventListener("pointerup",i),document.body.addEventListener("pointercancel",i)},pe=X("toolbar",{state:()=>({activeItemId:""})});const It={class:"SliderItem"},Vt={key:0,class:"slider"},Ct=I({props:{min:{default:0},max:{default:100},modelValue:null,step:{default:1},label:{default:""},unit:{default:""},icon:null,edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,a=pe(),l=`slider-${Math.random()}`,n=K({startValue:0,isSliderVisible:!1}),i=120;x(()=>a.$state.activeItemId,()=>{a.$state.activeItemId!==l&&(n.isSliderVisible=!1)});const c=()=>{a.$state.activeItemId===l&&(a.$state.activeItemId="")};x(()=>o.disabled,()=>{o.disabled&&c()});const w=h=>{n.startValue=o.modelValue,n.isSliderVisible=!0,a.$state.activeItemId=l,me(h,b=>{const y=i/(o.max-o.min),v=D(q(n.startValue+b/y,o.step,o.min),o.min,o.max);e("update:modelValue",v)},b=>{b&&c()})},V=h=>{o.disabled||(n.isSliderVisible?c():w(h))},S=h=>{e("update:modelValue",h)};return(h,b)=>(r(),m("div",It,[_(W,{onPointerdown:oe(V,["prevent"]),label:`${t.modelValue}${t.unit}`,icon:t.icon,edge:t.edge,disabled:t.disabled},null,8,["onPointerdown","label","icon","edge","disabled"]),u(n).isSliderVisible?(r(),m("div",Vt,[_(wt,{modelValue:t.modelValue,"onUpdate:modelValue":S,label:t.label,min:t.min,max:t.max,onClose:c},null,8,["modelValue","label","min","max"])])):g("",!0)]))}});var H=C(Ct,[["__scopeId","data-v-22a62bba"]]);const xt={class:"SwitchList"},St={class:"label"},kt={class:"list"},At=["onClick"],Tt={key:0,class:"icon"},Lt=I({props:{options:{default:()=>[]},modelValue:null,label:null},emits:["update:modelValue","close"],setup(t,{emit:e}){const o=async a=>{e("update:modelValue",a),await j(200),e("close")};return(a,l)=>(r(),m("div",xt,[p("div",St,P(t.label),1),p("ul",kt,[(r(!0),m(ae,null,we(t.options,n=>(r(),m("li",{key:n.key,class:R(["opt",{selected:n.key===t.modelValue}]),onClick:i=>o(n.key)},[n.icon?(r(),m("div",Tt,[_(ue,{symbol:n.icon},null,8,["symbol"])])):g("",!0)],10,At))),128))])]))}});var Mt=C(Lt,[["__scopeId","data-v-992fddb4"]]);const Pt={class:"SwitchItem"},Et={class:"list"},Bt=I({props:{modelValue:null,options:{default:()=>[]},label:{default:""},edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,a=$(()=>o.options.find(y=>y.key===o.modelValue)),l=$(()=>o.options.findIndex(y=>y.key===o.modelValue)),n=pe(),i=`switch-${Math.random()}`,c=K({startIndex:0,isListVisible:!1}),w=120;x(()=>n.$state.activeItemId,()=>{n.$state.activeItemId!==i&&(c.isListVisible=!1)});const V=()=>{n.$state.activeItemId===i&&(n.$state.activeItemId="")};x(()=>o.disabled,()=>{o.disabled&&V()});const S=y=>{c.startIndex=l.value,c.isListVisible=!0,n.$state.activeItemId=i,me(y,v=>{const s=w,d=D(q(c.startIndex+v/s,1,0),0,o.options.length-1);e("update:modelValue",o.options[d].key)},v=>{v&&V()})},h=y=>{o.disabled||(c.isListVisible?V():S(y))},b=y=>{e("update:modelValue",y)};return(y,v)=>{var s;return r(),m("div",Pt,[_(W,{onPointerdown:oe(h,["prevent"]),icon:(s=u(a))==null?void 0:s.icon,edge:t.edge,disabled:t.disabled},null,8,["onPointerdown","icon","edge","disabled"]),Ie(p("div",Et,[_(Mt,{label:t.label,options:t.options,modelValue:t.modelValue,"onUpdate:modelValue":b,onClose:V},null,8,["label","options","modelValue"])],512),[[Ve,u(c).isListVisible]])])}}});var Q=C(Bt,[["__scopeId","data-v-004e3a7c"]]);const N=X("app",{state:()=>({modal:void 0,toast:""})});const Dt={class:"Toolbar"},Rt={class:"radioGroup"},Kt={class:"radioGroup"},zt={class:"radioGroup"},Ut={class:"radioGroup"},Zt=I({setup(t){const e=z(),o=N(),a=$({set:v=>{e.penCount=[v,e.penCount[1]]},get:()=>e.penCount[0]}),l=$({set:v=>{e.penCount=[e.penCount[0],v]},get:()=>e.penCount[1]}),n=$({set:v=>{l.value=v?a.value:0},get:()=>l.value>=1}),i=[{key:"line",label:"line",icon:"line"},{key:"free",label:"free",icon:"freehand"}],c=$({set:v=>{e.isStraight=v==="line"},get:()=>e.isStraight?"line":"free"}),w=()=>{e.isEraser=!1},V=()=>{e.isEraser=!0},S=[{key:"mirror",label:"mirror",icon:"mode_mirror"},{key:"kaleido",label:"kaleido",icon:"mode_kaleido"}],h=$({set:v=>{e.isKaleido=[v==="kaleido",e.isKaleido[1]]},get:()=>e.isKaleido[0]?"kaleido":"mirror"}),b=$({set:v=>{e.isKaleido=[e.isKaleido[0],v==="kaleido"]},get:()=>e.isKaleido[1]?"kaleido":"mirror"}),y=()=>{o.$state.modal||(o.$state.modal="export")};return(v,s)=>(r(),m("div",Dt,[p("div",Rt,[_(vt,{modelValue:u(e).$state.penColor,"onUpdate:modelValue":s[0]||(s[0]=d=>u(e).$state.penColor=d),checked:!u(e).isEraser,"onUpdate:checked":s[1]||(s[1]=d=>d&&w()),edge:"left",icon:"pen"},null,8,["modelValue","checked"]),_(J,{modelValue:u(e).isEraser,"onUpdate:modelValue":s[2]||(s[2]=d=>d&&V()),edge:"right",icon:"eraser"},null,8,["modelValue"])]),p("div",Kt,[_(H,{modelValue:u(e).penOpacity,"onUpdate:modelValue":s[3]||(s[3]=d=>u(e).penOpacity=d),label:"Opacity",icon:"opacity",min:1,max:100,edge:"left"},null,8,["modelValue"]),_(H,{modelValue:u(e).penWidth,"onUpdate:modelValue":s[4]||(s[4]=d=>u(e).penWidth=d),label:"Width",icon:"width",min:1,max:50,edge:"none"},null,8,["modelValue"]),_(Q,{label:"LineType",modelValue:u(c),"onUpdate:modelValue":s[5]||(s[5]=d=>A(c)?c.value=d:null),options:i,edge:"right"},null,8,["modelValue"])]),p("div",zt,[_(H,{modelValue:u(a),"onUpdate:modelValue":s[6]||(s[6]=d=>A(a)?a.value=d:null),label:"PenCount",icon:"count",min:u(U).min,max:u(U).max,edge:"left"},null,8,["modelValue","min","max"]),_(Q,{label:"MirrorType",modelValue:u(h),"onUpdate:modelValue":s[7]||(s[7]=d=>A(h)?h.value=d:null),options:S,edge:"right"},null,8,["modelValue"])]),p("div",Ut,[_(J,{modelValue:u(n),"onUpdate:modelValue":s[8]||(s[8]=d=>A(n)?n.value=d:null),edge:"left",icon:"2nd"},null,8,["modelValue"]),_(H,{modelValue:u(l),"onUpdate:modelValue":s[9]||(s[9]=d=>A(l)?l.value=d:null),label:"PenCount",icon:"count",min:u(Z).min,max:u(Z).max,edge:"none",disabled:!u(n)},null,8,["modelValue","min","max","disabled"]),_(Q,{label:"MirrorType",modelValue:u(b),"onUpdate:modelValue":s[10]||(s[10]=d=>A(b)?b.value=d:null),options:S,edge:"right",disabled:!u(n)},null,8,["modelValue","disabled"])]),_(W,{icon:"export",onCheck:y})]))}});var Ot=C(Zt,[["__scopeId","data-v-24d2a3f0"]]);const Wt={class:"CloseButton"},Ht=I({emits:["click"],setup(t,{emit:e}){return(o,a)=>(r(),m("div",Wt,[p("button",{onClick:a[0]||(a[0]=l=>e("click"))},"CLOSE")]))}});var Nt=C(Ht,[["__scopeId","data-v-d9da9796"]]);const Xt={},Ft={class:"PlaneBox"};function qt(t,e){return r(),m("div",Ft,[M(t.$slots,"default",{},void 0,!0)])}var Gt=C(Xt,[["render",qt],["__scopeId","data-v-11fe5bb8"]]);const he=async t=>{if(!t.naturalWidth||!t.naturalHeight)return;const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;const o=e.getContext("2d");if(!!o)return o.drawImage(t,0,0),new Promise(a=>{e.toBlob(l=>{a(l!=null?l:void 0)})})},jt=async t=>{let e;try{e=new ClipboardItem({"image/png":t})}catch{e=new ClipboardItem({"image/png":await t})}return await navigator.clipboard.write([e]),!0},Jt=async t=>{const e=he(t);return e?await jt(e.then(a=>{if(!a)throw new Error("failed to copy img");return a})).catch(a=>(console.warn(a),!1)):!1},_e=async t=>{const e=new Image;return e.src=URL.createObjectURL(t),new Promise(o=>{e.onload=e.onabort=e.onerror=()=>{o(e)}})},Qt=t=>{const{data:e,width:o,height:a}=t,l=(s,d)=>e[(d*o+s)*4+3]===0,n=s=>{for(let d=0;d<o;d++)if(!l(d,s))return!1;return!0},i=()=>{for(let s=0;s<a;s++)if(!n(s))return s;return a},c=()=>{for(let s=a-1;s>=0;s--)if(!n(s))return s;return-1},w=(s,d,f)=>{for(let T=d;T<=f;T++)if(!l(s,T))return!1;return!0},V=(s,d)=>{for(let f=0;f<o;f++)if(!w(f,s,d))return f;return o},S=(s,d)=>{for(let f=o-1;f>=0;f--)if(!w(f,s,d))return f;return-1},h=i();if(h===a)return;const b=c(),y=V(h,b),v=S(h,b);return new DOMRect(y,h,v-y+1,b-h+1)},Yt=async t=>{const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;const o=e.getContext("2d");if(!o)return;o.drawImage(t,0,0);const a=o.getImageData(0,0,e.width,e.height),l=Qt(a);if(!l)return;const n=o.getImageData(l.x,l.y,l.width,l.height);return e.width=l.width,e.height=l.height,o.putImageData(n,0,0),new Promise(i=>{e.toBlob(c=>{!c||i(_e(c))})})},eo=async t=>{const o={files:[new File([t],"image.png",{type:t.type,lastModified:Date.now()})],title:"Share Image"};return navigator.share(o)};const to={},oo={class:"PureButton"};function ao(t,e){return r(),m("button",oo,[M(t.$slots,"default",{},void 0,!0)])}var fe=C(to,[["render",ao],["__scopeId","data-v-6d5b9dab"]]);const no=t=>(ne("data-v-38d625af"),t=t(),le(),t),lo={class:"ExportDialog"},so={class:"close"},io=no(()=>p("div",{class:"title"}," Export Image ",-1)),co={class:"images"},ro={class:"image"},uo=["src"],mo={class:"image"},po=["src"],ho={class:"buttons"},_o=se("Copy"),fo=se("Share"),vo=I({emits:["close"],setup(t,{emit:e}){const o=240,a=N(),{toImgBlob:l}=re(),n=K({imgSrc:"",imgSize:{w:0,h:0},croppedImgSrc:"",croppedImgSize:{w:0,h:0},selected:void 0}),i=L(),c=L(),w=!!navigator.share,V=$(()=>{const s=o/Math.max(n.imgSize.w,n.imgSize.h,o);return{width:`${n.imgSize.w*s}px`,height:`${n.imgSize.h*s}px`}}),S=$(()=>{const s=o/Math.max(n.croppedImgSize.w,n.croppedImgSize.h,o);return{width:`${n.croppedImgSize.w*s}px`,height:`${n.croppedImgSize.h*s}px`}}),h=$(()=>{if(!!n.selected)return n.selected==="img"?i.value:c.value}),b=async()=>{if(!h.value)return;const s=await Jt(h.value);a.$state.toast=s?"copied!":"failed to copy img"},y=async()=>{if(!h.value)return;const s=await he(h.value);!s||await eo(s)};return(async()=>{const s=await l();if(!s)return;const d=await _e(s);n.imgSize.w=d.naturalWidth,n.imgSize.h=d.naturalHeight,n.imgSrc=d.src,n.selected="img";const f=await Yt(d);!f||(n.croppedImgSize.w=f.naturalWidth,n.croppedImgSize.h=f.naturalHeight,n.croppedImgSrc=f.src)})(),(s,d)=>(r(),m("div",lo,[_(Gt,null,{default:k(()=>[p("div",so,[_(Nt,{onClick:d[0]||(d[0]=f=>e("close"))})]),io,p("div",co,[p("div",ro,[u(n).imgSrc?(r(),m("img",{key:0,src:u(n).imgSrc,style:E(u(V)),class:R({selected:u(n).selected==="img"}),ref:(f,T)=>{T.imgRef=f,i.value=f},onClick:d[1]||(d[1]=f=>u(n).selected="img")},null,14,uo)):g("",!0)]),p("div",mo,[u(n).croppedImgSrc?(r(),m("img",{key:0,src:u(n).croppedImgSrc,style:E(u(S)),class:R({selected:u(n).selected==="croppedImg"}),ref:(f,T)=>{T.croppedImgRef=f,c.value=f},onClick:d[2]||(d[2]=f=>u(n).selected="croppedImg")},null,14,po)):g("",!0)])]),p("div",ho,[_(fe,{onClick:b,disabled:!u(n).selected},{default:k(()=>[_o]),_:1},8,["disabled"]),w?(r(),B(fe,{key:0,onClick:y},{default:k(()=>[fo]),_:1})):g("",!0)])]),_:1})]))}});var go=C(vo,[["__scopeId","data-v-38d625af"]]);const yo=t=>(ne("data-v-0428bd03"),t=t(),le(),t),bo={key:0,class:"Modal"},$o=yo(()=>p("div",{class:"bg"},null,-1)),wo={class:"content"},Io=I({setup(t){const e=Ce(),o=$(()=>{var l,n;return((n=(l=e.default)==null?void 0:l.call(e))!=null?n:[]).some(i=>i.el||typeof i.type=="object")});return(a,l)=>(r(),B(ce,{to:"body"},[_(ie,{name:"fade",appear:""},{default:k(()=>[u(o)?(r(),m("div",bo,[$o,p("div",wo,[M(a.$slots,"default",{},void 0,!0)])])):g("",!0)]),_:3})]))}});var Vo=C(Io,[["__scopeId","data-v-0428bd03"]]);const Co=I({setup(t){const e=N(),o=$(()=>e.$state.modal),a=()=>{e.modal=void 0};return(l,n)=>(r(),B(Vo,null,{default:k(()=>[u(o)==="export"?(r(),B(go,{key:0,onClose:a})):g("",!0)]),_:1}))}}),xo=(t,e)=>{const o=xe(t.value);let a=[];return x(t,()=>{const l=t.value,n=setTimeout(()=>{o.value=l,a=a.filter(i=>i!==n)},e);a.push(n)}),Se(()=>{a.forEach(l=>clearTimeout(l))}),o};const So={key:0,class:"Toast"},ko={class:"content"},Ao=I({setup(t){const e=1500,o=1e3,a=N(),l=$(()=>a.$state.toast),n=xo(l,o),i=$(()=>l.value||n.value);let c=0;return x(l,()=>{window.clearTimeout(c),!!l.value&&(c=window.setTimeout(()=>{a.$state.toast=""},e))}),(w,V)=>(r(),B(ce,{to:"body"},[_(ie,{name:"fade",appear:""},{default:k(()=>[u(l)?(r(),m("div",So,[p("div",ko,P(u(i)),1)])):g("",!0)]),_:1})]))}});var To=C(Ao,[["__scopeId","data-v-ab017958"]]);const Lo={class:"toolbar"},Mo={class:"canvas"},Po={class:"moldals"},Eo={class:"toast"},Bo=I({setup(t){return(e,o)=>(r(),m(ae,null,[p("div",Lo,[_(Ot)]),p("div",Mo,[_(Ee)]),p("div",Po,[_(Co)]),p("div",Eo,[_(To)])],64))}});var Do=C(Bo,[["__scopeId","data-v-20cc4718"]]);ke(Do).use(Ae()).mount("#app");
