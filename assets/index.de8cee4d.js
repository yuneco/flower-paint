var ze=Object.defineProperty;var Ve=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var ke=(t,e,o)=>e in t?ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,Ie=(t,e)=>{for(var o in e||(e={}))Fe.call(e,o)&&ke(t,o,e[o]);if(Ve)for(var o of Ve(e))Ge.call(e,o)&&ke(t,o,e[o]);return t};import{d as C,o as d,c as u,a as v,b as i,e as te,f as E,r as P,g as N,h as f,w as V,u as O,i as r,j as h,k as S,l as B,T as oe,m as he,F as _e,n as Xe,p as X,t as R,q as W,s as z,v as H,x as Se,y as qe,z as je,A as Ye,B as Ae,C as Je,D as ne,E as ae,G as Z,H as Qe,I as me,J as et,K as tt,L as ot}from"./vendor.8078cffc.js";const nt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}};nt();const at={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 163.13 163.13"},lt=["fill"],st=i("path",{d:"M81.56,15.51a65.84,65.84,0,0,0-28.25,6.33l2.63-6.09a6.6,6.6,0,1,0-12.12-5.23L35.4,30a9.68,9.68,0,0,0,5,12.72L60,51.19A6.6,6.6,0,0,0,65.2,39.07l-9-3.88A52.85,52.85,0,0,1,134.29,78c.08,1.19.13,2.38.13,3.59a6.6,6.6,0,1,0,13.2,0A66.13,66.13,0,0,0,81.56,15.51Z"},null,-1),ct=i("path",{d:"M122.69,120.37l-19.53-8.43a6.6,6.6,0,0,0-8.67,3.44,6.61,6.61,0,0,0,3.44,8.68l9,3.88a52.52,52.52,0,0,1-25.35,6.48h0A52.84,52.84,0,0,1,28.84,85.15c-.08-1.19-.13-2.38-.13-3.58a6.6,6.6,0,0,0-13.2,0,66.07,66.07,0,0,0,66.05,66.05h0a65.84,65.84,0,0,0,28.25-6.33l-2.63,6.1a6.6,6.6,0,0,0,12.12,5.23l8.42-19.53A9.68,9.68,0,0,0,122.69,120.37Z"},null,-1),it=[st,ct],rt=["fill"],dt=i("path",{d:"M160.26,74.08l-20.41-20.4A6.6,6.6,0,0,0,130.52,63L142.61,75.1H88.31V20.8L100.4,32.89a6.6,6.6,0,0,0,9.33-9.33L89.33,3.15a10.79,10.79,0,0,0-15.24,0L53.68,23.56A6.6,6.6,0,0,0,63,32.89L75.11,20.8V75.1H20.81L32.9,63a6.6,6.6,0,0,0-9.34-9.33L3.16,74.08a10.77,10.77,0,0,0,0,15.24l20.4,20.41a6.6,6.6,0,0,0,9.34-9.34L20.81,88.3h54.3v54.31L63,130.51a6.6,6.6,0,0,0-9.34,9.34l20.41,20.4A10.65,10.65,0,0,0,81,163.37a5.63,5.63,0,0,0,.71,0,5.48,5.48,0,0,0,.7,0,10.69,10.69,0,0,0,6.92-3.12l20.4-20.4a6.6,6.6,0,0,0-9.33-9.34l-12.09,12.1V88.3h54.3l-12.09,12.09a6.6,6.6,0,0,0,9.33,9.34l20.41-20.41A10.79,10.79,0,0,0,160.26,74.08Z"},null,-1),ut=[dt],ht=C({props:{symbol:null,color:{default:"#444"}},setup(t){return(e,o)=>(d(),u("svg",at,[t.symbol==="rotate"?(d(),u("g",{key:0,fill:t.color},it,8,lt)):v("",!0),t.symbol==="move"?(d(),u("g",{key:1,fill:t.color},ut,8,rt)):v("",!0)]))}}),L={appTheme:"#31505e",textColor:"#3a3a3a",themeColor:"rgb(170 190 195)",themeDark:"rgb(49 80 94)",themeLight:"rgb(200 208 209)",danger:"rgb(217 27 26)",anchorColor:["#91bccc","#eeaabb"]},le=te("canvas",{state:()=>({penColor:"#3399aa",penCount:[6,0],isKaleido:[!0,!0],penWidth:20,isStraight:!1,isEraser:!1,penOpacity:100,tool:"draw",coord:new E.exports.Coordinate,anchor:[new E.exports.Coordinate,new E.exports.Coordinate({scroll:new E.exports.Point(300,0)})]})}),F=t=>{gtag("event",`${t.action}${t.value?"-"+t.value:""}`,{event_categoy:t.category,event_label:t.value})},Ee=t=>F({category:"tool",action:"tool-change",value:t}),ve=(t,e)=>F({category:"tool",action:t,value:e?"on":"off"}),_t=t=>F({category:"modal",action:"modal-open",value:t}),Le=(t,e)=>F({category:"export",action:t,value:e}),fe=t=>F({category:"paintAction",action:t,value:""}),Te=(t,e)=>F({category:"customError",action:t,value:e}),se={min:1,max:16},ce={min:2,max:16},q=(t,e,o)=>Math.max(e,Math.min(o,t)),pe=(t,e,o=0)=>o+Math.round((t-o)/e)*e,mt=()=>{const t=le(),e=a=>{const[l,c]=t.$state.penCount;if(c){const s=q(c+(a?1:-1),ce.min,ce.min);t.$state.penCount=[l,s]}else{const s=q(l+(a?1:-1),se.min,se.max);t.$state.penCount=[s,c]}};return{penCountUp:()=>e(!0),penCountDown:()=>e(!1)}},D=P(),ye=P(),Me=N({enableUndo:!1}),j=()=>{var t,e;Me.enableUndo=((e=(t=D.value)==null?void 0:t.historyCount)!=null?e:0)>0},Pe=t=>{var e,o,n;t.key==="ArrowUp"&&((e=ye.value)==null||e.penCountUp()),t.key==="ArrowDown"&&((o=ye.value)==null||o.penCountDown()),t.key==="z"&&t.metaKey&&((n=D.value)==null||n.undo(),fe("undo"))};window.removeEventListener("keydown",Pe);window.addEventListener("keydown",Pe);const vt=t=>{const e=le();ye.value=mt(),!!D.value&&(console.warn("SymPaint init called multiple times."),Te("useSymPaint","init duplicated"));const n=new E.exports.PaintCanvas(t,t.offsetWidth,t.offsetHeight);n.penCount=e.penCount,n.penColor=e.penColor,n.penWidth=e.penWidth,n.tool=e.isStraight?"draw:line":"draw",n.isKaleido=e.isKaleido,n.penKind=e.isEraser?"eraser":"normal",n.anchor=e.anchor[0],n.childAnchor=e.anchor[1],n.enableCapture=!1,n.anchorColor=L.anchorColor,n.listenRequestZoom(l=>{e.coord=e.coord.clone({scale:l})}),n.listenRequestScrollTo(({point:l,target:c})=>{if(c==="canvas"&&(e.coord=e.coord.clone({scroll:l})),c==="anchor"){const s=n.hasSubPen?1:0;e.anchor[s]=e.anchor[s].clone({scroll:l})}}),n.listenRequestRotateTo(({angle:l,target:c})=>{if(c==="canvas"&&(e.coord=e.coord.clone({angle:l})),c==="anchor"){const s=n.hasSubPen?1:0;e.anchor[s]=e.anchor[s].clone({angle:l})}}),n.listenRequestUndo(()=>{n.undo(),j()}),n.listenRequestAnchorTransform(l=>{n.activeAnchor=l}),n.listenRequestAnchorReset(()=>{n.anchor=new E.exports.Coordinate}),n.listenStrokeEnd(()=>{j()}),new E.exports.utils.ToolKeyWatcher().listenChange(l=>{if(l==="draw"||l==="draw:stamp"){e.tool="draw",e.isStraight=!1;return}if(l==="draw:line"){e.tool="draw",e.isStraight=!0;return}e.tool=l}),V(()=>[e.penColor],()=>{n.penColor=e.penColor}),V(()=>e.penCount,(l,c)=>{n.penCount=e.penCount,e.penCount[0]===1&&(n.isKaleido=[!1,e.isKaleido[1]]);const s=!!l[1]&&!c[1],p=!l[1]&&!!c[1];(s||p)&&ve("tool-2nd",s)}),V(()=>[e.penWidth],()=>{n.penWidth=e.penWidth}),V(()=>[e.isStraight],()=>{n.tool=e.isStraight?"draw:line":"draw",Ee(n.tool)}),V(()=>[e.isKaleido],()=>{n.isKaleido=e.isKaleido,e.penCount[0]===1&&(n.isKaleido=[!1,e.isKaleido[1]]),ve("tool-kaleido",e.isKaleido[n.hasSubPen?1:0])}),V(()=>[e.isEraser],()=>{n.penKind=e.isEraser?"eraser":"normal",ve("tool-eraser",e.isEraser)}),V(()=>[e.penOpacity],()=>{n.penAlpha=e.penOpacity/100}),V(()=>[e.tool],()=>{e.tool==="draw"?n.tool=e.isStraight?"draw:line":"draw":n.tool=e.tool,Ee(n.tool)}),V(()=>[e.coord],()=>{n.coord=e.coord}),V(()=>[e.anchor[0]],()=>{n.anchor=e.anchor[0]}),V(()=>[e.anchor[1]],()=>{n.childAnchor=e.anchor[1]}),D.value=n},ie=()=>{const t=le(),e=s=>{vt(s),j()},o=f(()=>t.penCount[1]>=1),n=f(()=>t.anchor[o.value?1:0]),a=f(()=>L.anchorColor[o.value?1:0]),l=f(()=>{var s;return(s=D.value)==null?void 0:s.canvas2displayPos(n.value.scroll,"current")}),c=f(()=>Me.enableUndo);return{state:t,init:e,toImgBlob:()=>{var s;return(s=D.value)==null?void 0:s.toImgBlob()},clear:()=>{var s;(s=D.value)==null||s.clear(!0),t.coord=new E.exports.Coordinate,t.anchor=[new E.exports.Coordinate,new E.exports.Coordinate({scroll:new E.exports.Point(300,0)})],t.penCount=[t.penCount[0],0],j(),fe("clear")},undo:()=>{var s;(s=D.value)==null||s.undo(),j(),fe("undo")},view2canvas:s=>{var p;return(p=D.value)==null?void 0:p.display2canvasPos(new E.exports.Point(s.x,s.y),"current")},canvas2view:s=>{var p;return(p=D.value)==null?void 0:p.canvas2displayPos(new E.exports.Point(s.x,s.y),"current")},inited:f(()=>!!D.value),activeAnchor:n,activeAnchorColor:a,activeAnchorPos:l,enableUndo:c}};var k=(t,e)=>{const o=t.__vccOpts||t;for(const[n,a]of e)o[n]=a;return o};const ft={class:"CanvasOverlay"},pt={key:0,class:"marker"},yt=C({setup(t){O(c=>({"7a6e355b":r(a)}));const{state:e,activeAnchorPos:o,activeAnchorColor:n}=ie(),a=f(()=>{var c,s;return`translate(${(c=o.value)==null?void 0:c.x}px, ${(s=o.value)==null?void 0:s.y}px)`}),l=f(()=>{const c=e.tool;if(c==="rotate:anchor")return"rotate";if(c==="scroll:anchor")return"move"});return(c,s)=>(d(),u("div",ft,[r(o)?(d(),u("div",pt,[h(oe,{name:"fade",appear:""},{default:S(()=>[r(l)?(d(),B(ht,{key:0,class:"markerImage",symbol:r(l),color:r(n)},null,8,["symbol","color"])):v("",!0)]),_:1})])):v("",!0)]))}});var gt=k(yt,[["__scopeId","data-v-12634c28"]]);const bt={class:"overlayContainer"},wt={class:"overlay"},Ct=C({setup(t){O(a=>({"9a780010":n.value.width,e825f596:n.value.height}));const e=P(),{init:o}=ie(),n=P({width:"0",height:"0"});return he(()=>{const a=e.value;!a||(a.addEventListener("touchmove",l=>{l.preventDefault()}),n.value={width:`${a.offsetWidth}px`,height:`${a.offsetHeight}px`},o(a))}),(a,l)=>(d(),u(_e,null,[i("div",{ref_key:"el",ref:e,class:"PaintCanvas"},null,512),i("div",bt,[i("div",wt,[h(gt)])])],64))}});var xt=k(Ct,[["__scopeId","data-v-743b55af"]]);const ge=async t=>new Promise(e=>{setTimeout(e,t)}),$t={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 128"},Vt=i("rect",{width:"128",height:"128",fill:"none"},null,-1),kt=["fill"],It=["fill"],St=["fill"],At=["fill"],Et=["fill"],Lt=["fill"],Tt=["fill"],Mt=["fill"],Pt=Xe(`<path d="M86.9,56.7c-7,0-12.7,5.7-12.7,12.7c0,7,5.7,12.7,12.7,12.7c0,0,0,0,0,0c7,0,12.7-5.7,12.7-12.7
		C99.6,62.4,94,56.7,86.9,56.7z"></path><path d="M56.2,56.7c-7,0-12.7,5.7-12.7,12.7c0,7,5.7,12.7,12.7,12.7c0,0,0,0,0,0c7,0,12.7-5.7,12.7-12.7
		C68.9,62.4,63.3,56.7,56.2,56.7z"></path><path d="M48.3,48.3c4.8,0,8.7-3.9,8.7-8.7c0-4.8-3.9-8.7-8.7-8.7c-4.8,0-8.7,3.9-8.7,8.7C39.6,44.4,43.5,48.3,48.3,48.3
		C48.3,48.3,48.3,48.3,48.3,48.3z"></path><path d="M98.5,30.8c-4.8,0-8.7,3.9-8.7,8.7c0,4.8,3.9,8.7,8.7,8.7c0,0,0,0,0,0c4.8,0,8.7-3.9,8.7-8.7
		C107.2,34.7,103.3,30.8,98.5,30.8z"></path><path d="M82.2,39.5c0-4.8-3.9-8.7-8.7-8.7c-4.8,0-8.7,3.9-8.7,8.7c0,4.8,3.9,8.7,8.7,8.7c0,0,0,0,0,0
		C78.3,48.3,82.2,44.4,82.2,39.5z"></path><path d="M115.2,6.1H12.8c-3.7,0-6.6,3-6.6,6.6v102.5c0,3.7,3,6.6,6.6,6.6h102.5c3.7,0,6.6-3,6.6-6.6V12.8
		C121.9,9.1,118.9,6.1,115.2,6.1z M108.6,60.6c-2.2,2.3-3.6,5.4-3.6,8.8s1.4,6.6,3.6,8.8v6.8c-9,1-16.4,7.3-19.1,15.7
		c-2.9-9.2-11.6-15.8-21.7-15.8c-10.1,0-18.7,6.6-21.7,15.8c-3-9.2-11.6-15.8-21.7-15.8c-1.7,0-3.4,0.2-5,0.6v-4.9
		c1.8,1,3.9,1.6,6.1,1.6c0,0,0,0,0,0c7,0,12.7-5.7,12.7-12.7c0-7-5.7-12.7-12.7-12.7c-2.2,0-4.3,0.6-6.1,1.6v-11
		c1.2,0.6,2.4,0.9,3.8,0.9c0,0,0,0,0,0c4.8,0,8.7-3.9,8.7-8.7c0-4.8-3.9-8.7-8.7-8.7c-1.4,0-2.7,0.3-3.8,0.9v-8.1
		c2.1-0.4,3.6-2.1,4-4.2h8.4c0.4,2.4,2.5,4.3,5,4.3s4.6-1.9,5-4.3h8.4c0.4,2.4,2.5,4.3,5,4.3s4.6-1.9,5-4.3h8.4
		c0.4,2.4,2.5,4.3,5,4.3s4.6-1.9,5-4.3h8.4c0.4,2.4,2.4,4.2,4.9,4.3c0,0,0.1,0,0.1,0c2.5,0,4.6-1.9,5-4.3h8.3
		c0.3,1.8,1.5,3.3,3.1,3.9V60.6z"></path>`,6),Rt=[Pt],Ht=["fill"],Dt=["fill"],Ot=i("rect",{x:"11.13",y:"16.45",width:"104.97",height:"14.33",rx:"3.2"},null,-1),Bt=i("rect",{x:"10.47",y:"42",width:"105.63",height:"21.62",rx:"3.2"},null,-1),Zt=i("rect",{x:"10.47",y:"80.06",width:"105.63",height:"31.46",rx:"3.2"},null,-1),Ut=[Ot,Bt,Zt],Kt=["fill"],Nt=i("path",{d:"M69,33.7H59a6.6,6.6,0,0,0,0,13.2H69a1.44,1.44,0,0,1,1.55,1.26v52.28A1.45,1.45,0,0,1,69,101.7H14.75a1.45,1.45,0,0,1-1.55-1.26V48.16a1.44,1.44,0,0,1,1.55-1.26h10a6.6,6.6,0,1,0,0-13.2h-10A14.62,14.62,0,0,0,0,48.16v52.28A14.63,14.63,0,0,0,14.75,114.9H69a14.63,14.63,0,0,0,14.75-14.46V48.16A14.62,14.62,0,0,0,69,33.7Z"},null,-1),Wt=i("path",{d:"M27.11,28.19a6.58,6.58,0,0,0,4.67-1.93l3.49-3.49V69.83a6.6,6.6,0,0,0,13.2,0V22.29L52,25.78a6.6,6.6,0,0,0,9.33-9.33L46.77,1.93a6.61,6.61,0,0,0-9.33,0l-15,15a6.6,6.6,0,0,0,4.66,11.27Z"},null,-1),zt=[Nt,Wt],Ft=["fill"],Gt=i("path",{d:"M30.16,65.34a8.73,8.73,0,1,1,8.73,8.72A8.73,8.73,0,0,1,30.16,65.34Z"},null,-1),Xt=i("path",{d:"M56.27,65.34A8.73,8.73,0,1,1,65,74.06,8.72,8.72,0,0,1,56.27,65.34Z"},null,-1),qt=i("path",{d:"M82.37,65.34a8.73,8.73,0,1,1,8.72,8.72A8.72,8.72,0,0,1,82.37,65.34Z"},null,-1),jt=[Gt,Xt,qt],Yt=["fill"],Jt=i("path",{d:"M120.94,61.05,94.53,45.81a3.4,3.4,0,0,0-5.1,2.94V57.4H70.59V38.56h8.65a3.4,3.4,0,0,0,3-5.1L66.94,7.05a3.41,3.41,0,0,0-5.9,0L45.8,33.46a3.4,3.4,0,0,0,2.94,5.1h8.65V57.4H38.56V48.75a3.4,3.4,0,0,0-5.11-2.94L7,61.05A3.41,3.41,0,0,0,7,67L33.45,82.19a3.4,3.4,0,0,0,5.11-2.94V70.6H57.39V89.44H48.74a3.4,3.4,0,0,0-2.94,5.1L61,121a3.41,3.41,0,0,0,5.9,0L82.19,94.54a3.4,3.4,0,0,0-3-5.1H70.59V70.6H89.43v8.65a3.4,3.4,0,0,0,5.1,2.94L120.94,67A3.41,3.41,0,0,0,120.94,61.05Z"},null,-1),Qt=[Jt],eo=["fill"],to=i("path",{d:"M89.23,16.79a54.13,54.13,0,0,0-54.33.32l-3.55-5.29a2.57,2.57,0,0,0-4.45.3L15.39,35.56a2.58,2.58,0,0,0,2.49,3.7l25.78-1.74.27,0a2.57,2.57,0,0,0,2-4l-3.63-5.41A40.61,40.61,0,0,1,102.17,71.3c-.12.63-.26,1.25-.41,1.87a6.6,6.6,0,1,0,12.81,3.18A54.07,54.07,0,0,0,89.23,16.79Z"},null,-1),oo=i("path",{d:"M109.2,86.78l-26.09.91a2.55,2.55,0,0,0-2.26,1.56A2.51,2.51,0,0,0,81,91.62l3.59,5.75A40.62,40.62,0,0,1,22.45,55.53c.13-.63.26-1.25.42-1.87a6.6,6.6,0,0,0-12.82-3.18,53.87,53.87,0,0,0,81.56,58.09l3.24,5.2a2.58,2.58,0,0,0,4.46-.16l12.25-23A2.57,2.57,0,0,0,109.2,86.78Z"},null,-1),no=[to,oo],ao=["fill"],lo=i("path",{d:"M74.6,31H64.31V24.52a3.72,3.72,0,0,0-5.58-3.22L34.9,35.06a3.72,3.72,0,0,0,0,6.44L58.73,55.26A3.72,3.72,0,0,0,64.31,52V44.16H74.6c23,0,25.66,11.82,25.66,20.71,0,10.24-3.05,20.71-25.66,20.71H29.09a6.6,6.6,0,0,0,0,13.2H74.6c13.42,0,23.56-3.34,30.16-9.93,5.77-5.77,8.7-13.84,8.7-24C113.46,43.32,99.3,31,74.6,31Z"},null,-1),so=[lo],co=["fill"],io=i("path",{d:"M100.86,85.58H55.34c-12.68,0-25.65-2.46-25.65-20.71,0-8.89,2.66-20.71,25.65-20.71h10.3V52a3.72,3.72,0,0,0,5.58,3.22L95.05,41.5a3.72,3.72,0,0,0,0-6.44L71.22,21.3a3.72,3.72,0,0,0-5.58,3.22V31H55.34c-24.69,0-38.85,12.35-38.85,33.9,0,10.14,2.92,18.21,8.7,24,6.6,6.59,16.74,9.93,30.15,9.93h45.52a6.6,6.6,0,0,0,0-13.2Z"},null,-1),ro=[io],uo=["fill"],ho=i("path",{d:"M51.9,95.55a5,5,0,0,0,5-5V64.67a5,5,0,0,0-10,0V90.55A5,5,0,0,0,51.9,95.55Z"},null,-1),_o=i("path",{d:"M65.26,95.55a5,5,0,0,0,5-5V64.67a5,5,0,0,0-10,0V90.55A5,5,0,0,0,65.26,95.55Z"},null,-1),mo=i("path",{d:"M78.63,95.55a5,5,0,0,0,5-5V64.67a5,5,0,0,0-10,0V90.55A5,5,0,0,0,78.63,95.55Z"},null,-1),vo=i("path",{d:"M99.85,24.3H83.33a2.53,2.53,0,0,1-2.53-2.53v-2.3A3.8,3.8,0,0,0,77,15.68H53.52a3.79,3.79,0,0,0-3.79,3.79v2.3A2.53,2.53,0,0,1,47.2,24.3H30.68a7.19,7.19,0,0,0-7.19,7.19V45.74a7.18,7.18,0,0,0,7.19,7.18h.63v48.71a10.23,10.23,0,0,0,10.22,10.22h47a10.23,10.23,0,0,0,10.23-10.22V52.92h1.11A7.18,7.18,0,0,0,107,45.74V31.49A7.19,7.19,0,0,0,99.85,24.3Zm-62,11.17H55.56a5.33,5.33,0,0,0,5.33-5.33v-.48a2.82,2.82,0,0,1,2.82-2.82h3.11a2.82,2.82,0,0,1,2.82,2.82v.48A5.33,5.33,0,0,0,75,35.47H92.73a3.15,3.15,0,0,1,0,6.29H37.8a3.15,3.15,0,0,1,0-6.29ZM87.57,97.63a3,3,0,0,1-3,3.05h-39a3,3,0,0,1-3.05-3.05V52.92H87.57Z"},null,-1),fo=[ho,_o,mo,vo],po=["fill"],yo=i("path",{d:"M70.6,97V57a6.59,6.59,0,0,0-6.6-6.6,4.53,4.53,0,0,0-.52,0,4.36,4.36,0,0,0-.51,0H55a6.6,6.6,0,1,0,0,13.2H57.4V97a6.6,6.6,0,0,0,0,13.19H70.56A6.6,6.6,0,0,0,70.6,97Z"},null,-1),go=i("circle",{cx:"63",cy:"32.67",r:"7.63"},null,-1),bo=[yo,go],Re=C({props:{symbol:null,color:{default:"#445054"}},setup(t){return(e,o)=>(d(),u("svg",$t,[Vt,t.symbol==="2nd"?(d(),u("path",{key:0,fill:t.color,d:"M119.81,64a6.5,6.5,0,0,0-6.5-6.5h-1l.52-.91a6.5,6.5,0,1,0-11.26-6.5L101,51l-.52-.91a6.52,6.52,0,0,0-7.5-3,6.49,6.49,0,0,0,1.18-8l-.53-.91h1a6.5,6.5,0,0,0,0-13h-1l.53-.9a6.5,6.5,0,1,0-11.26-6.5l-.52.9-.53-.9a6.5,6.5,0,1,0-11.26,6.5l.53.9h-1a6.51,6.51,0,0,0-6.32,5,6.51,6.51,0,0,0-6.32-5h-1l.52-.9a6.5,6.5,0,1,0-11.26-6.5l-.52.9-.53-.9a6.5,6.5,0,1,0-11.26,6.5l.53.9H32.83a6.5,6.5,0,1,0,0,13h1.05l-.53.91a6.49,6.49,0,0,0,1.18,8,6.51,6.51,0,0,0-7.5,3l-.52.91L26,50.09a6.5,6.5,0,1,0-11.26,6.5l.52.91h-1a6.5,6.5,0,0,0,0,13h1l-.52.91a6.49,6.49,0,0,0,2.38,8.87,6.37,6.37,0,0,0,3.24.88A6.52,6.52,0,0,0,26,77.91l.52-.91.52.91a6.52,6.52,0,0,0,5.64,3.25,6.28,6.28,0,0,0,1.86-.29,6.51,6.51,0,0,0-1.18,8l.53.91H32.83a6.5,6.5,0,0,0,0,13h1.05l-.53.9a6.51,6.51,0,0,0,2.38,8.88,6.48,6.48,0,0,0,8.88-2.38l.53-.9.52.9a6.5,6.5,0,0,0,11.26-6.5l-.52-.9h1a6.51,6.51,0,0,0,6.32-5,6.51,6.51,0,0,0,6.32,5h1l-.53.9A6.5,6.5,0,0,0,73,112.54a6.41,6.41,0,0,0,3.25.88,6.49,6.49,0,0,0,5.63-3.26l.53-.9.52.9a6.5,6.5,0,0,0,11.26-6.5l-.53-.9h1a6.5,6.5,0,0,0,0-13h-1l.53-.91a6.5,6.5,0,0,0-1.18-8,6.28,6.28,0,0,0,1.86.29,6.52,6.52,0,0,0,5.64-3.25L101,77l.52.91a6.52,6.52,0,0,0,5.64,3.25,6.37,6.37,0,0,0,3.24-.88,6.48,6.48,0,0,0,2.38-8.87l-.52-.91h1A6.5,6.5,0,0,0,119.81,64Zm-56,30.76a6.5,6.5,0,0,0-6.32-5h-1l.52-.91a6.5,6.5,0,0,0-11.26-6.5l-.52.91-.53-.91a6.49,6.49,0,0,0-7.49-3,6.49,6.49,0,0,0,1.17-8l-.52-.91h1a6.5,6.5,0,0,0,0-13h-1l.52-.91a6.51,6.51,0,0,0-1.17-8A6.23,6.23,0,0,0,39,48.9a6.5,6.5,0,0,0,5.63-3.25l.53-.91.52.91a6.5,6.5,0,0,0,11.26-6.5l-.52-.91h1a6.5,6.5,0,0,0,6.32-5,6.5,6.5,0,0,0,6.32,5h1l-.53.91a6.5,6.5,0,0,0,11.26,6.5l.53-.91.52.91a6.5,6.5,0,0,0,5.63,3.25,6.34,6.34,0,0,0,1.87-.29,6.5,6.5,0,0,0-1.18,8l.52.91h-1a6.5,6.5,0,1,0,0,13h1l-.52.91a6.49,6.49,0,0,0,1.17,8,6.49,6.49,0,0,0-7.49,3l-.52.91-.53-.91a6.5,6.5,0,0,0-11.26,6.5l.53.91h-1A6.5,6.5,0,0,0,63.76,94.76Z"},null,8,kt)):v("",!0),t.symbol==="count"?(d(),u("path",{key:1,fill:t.color,d:"M113,56.36H74.79L93.9,23.27a6.81,6.81,0,0,0-11.8-6.8L63,49.55,43.9,16.47a6.81,6.81,0,0,0-11.8,6.8L51.21,56.36H13A6.81,6.81,0,0,0,13,70H51.21L32.1,103.07a6.81,6.81,0,0,0,11.8,6.81L63,76.79l19.1,33.09a6.81,6.81,0,0,0,5.91,3.4,6.81,6.81,0,0,0,5.89-10.21L74.79,70H113a6.81,6.81,0,0,0,0-13.62Z"},null,8,It)):v("",!0),t.symbol==="eraser"?(d(),u("path",{key:2,fill:t.color,d:"M118.24,48.91,81,11.43a6.46,6.46,0,0,0-9.15,0L9.69,73.13a6.43,6.43,0,0,0-1.91,4.56,6.5,6.5,0,0,0,1.87,4.59l37.21,37.48a6.48,6.48,0,0,0,4.6,1.91A6.41,6.41,0,0,0,56,119.79L118.2,58.06a6.43,6.43,0,0,0,1.91-4.56A6.5,6.5,0,0,0,118.24,48.91ZM76.4,25.14l8.3,8.36L48.57,69.36,40.27,61ZM51.49,106.05,23.4,77.75l7.69-7.63,28.09,28.3ZM68.36,89.31,60.06,81,96.2,45.08l8.29,8.36Z"},null,8,St)):v("",!0),t.symbol==="freehand"?(d(),u("path",{key:3,fill:t.color,d:"M18.55,118.29a6.63,6.63,0,0,1-6.63-6.43c-1-31,24.9-42.16,47.73-52C82.65,50,102.51,41.4,102,16.48a6.64,6.64,0,0,1,6.5-6.77h.14a6.64,6.64,0,0,1,6.63,6.5C116,50.06,88.83,61.74,64.9,72.05c-25.14,10.83-40.36,18.89-39.72,39.4a6.64,6.64,0,0,1-6.42,6.84Z"},null,8,At)):v("",!0),t.symbol==="line"?(d(),u("path",{key:4,fill:t.color,d:"M16.36,119.08a6.63,6.63,0,0,1-4.82-11.19l90.08-95.32a6.64,6.64,0,1,1,9.64,9.12L21.18,117A6.61,6.61,0,0,1,16.36,119.08Z"},null,8,Et)):v("",!0),t.symbol==="mode_kaleido"?(d(),u("path",{key:5,fill:t.color,d:"M115.67,47a34.49,34.49,0,0,0-27.81-7.24,51.67,51.67,0,0,0-17,6A43.92,43.92,0,0,0,67,27.46C62.64,17.65,54.54,10,45.38,7.07,39,5,32.68,5.44,27.7,8.31c-5.34,3.08-9.15,9-10.45,16.3a34.47,34.47,0,0,0,7.64,27.7,51.54,51.54,0,0,0,14.34,12A44.11,44.11,0,0,0,25.38,76.8c-6.29,8.72-8.84,19.54-6.83,29,1.41,6.59,4.94,11.81,9.92,14.69A20.21,20.21,0,0,0,38.63,123a27.09,27.09,0,0,0,9.18-1.67A34.49,34.49,0,0,0,68,100.88a51.84,51.84,0,0,0,3.23-17.65,43.82,43.82,0,0,0,17.1,5.41,40.94,40.94,0,0,0,4.13.21c9.25,0,18.13-3.15,24.35-8.77,5-4.52,7.77-10.18,7.77-15.94C124.56,58,121.32,51.71,115.67,47ZM35.09,43.83A21.06,21.06,0,0,1,30.31,27c.59-3.32,2.13-6.06,4-7.15a6.43,6.43,0,0,1,3.21-.75,12.34,12.34,0,0,1,3.76.65c4.36,1.41,10.23,5.61,13.63,13.19a33.18,33.18,0,0,1,.93,23.94A38.88,38.88,0,0,1,35.09,43.83ZM55.53,96.28A21.06,21.06,0,0,1,43.3,108.87c-3.17,1.14-6.31,1.18-8.2.09-1.66-1-3-3.14-3.57-6-1-4.48-.25-11.67,4.61-18.41A33.14,33.14,0,0,1,56.41,71.8,38.93,38.93,0,0,1,55.53,96.28Zm52.37-26c-3.4,3.07-10,6-18.25,5.21A33.14,33.14,0,0,1,68.46,64.27,38.88,38.88,0,0,1,90.1,52.79a21.09,21.09,0,0,1,17,4.3c2.57,2.17,4.17,4.87,4.17,7C111.29,66.07,110.05,68.28,107.9,70.23Z"},null,8,Lt)):v("",!0),t.symbol==="mode_mirror"?(d(),u("path",{key:6,fill:t.color,d:"M118.53,62.47a6.64,6.64,0,0,0-11.76,6.16,8.26,8.26,0,0,1-.26,8.74c-2.1,3.19-6.06,4.89-10.56,4.53-9.43-.74-22.73-11.19-27.28-15.35,1.26-6.29,4.43-25.76-1.54-38.36-4-8.39-11.77-13.93-20.35-14.47A21.66,21.66,0,0,0,27.05,24a6.63,6.63,0,1,0,11.19,7.13A8.25,8.25,0,0,1,46,27c3.82.23,7.25,2.82,9.19,6.9,3.92,8.28,1.75,24.24.39,30.7-5.9,2-24.6,9.05-32.57,20.65-5.26,7.66-6.14,17.18-2.29,24.87A21.6,21.6,0,0,0,39.41,122h.28A6.63,6.63,0,0,0,40,108.75a8.27,8.27,0,0,1-7.43-4.6c-1.7-3.42-1.2-7.68,1.37-11.41,5.22-7.6,20.28-13.77,26.48-15.8C64.56,80.67,80.49,94,94.91,95.13c.72.05,1.43.08,2.14.08a24.38,24.38,0,0,0,20.54-10.54A21.61,21.61,0,0,0,118.53,62.47Z"},null,8,Tt)):v("",!0),t.symbol==="opacity"?(d(),u("g",{key:7,fill:t.color},Rt,8,Mt)):v("",!0),t.symbol==="pen"?(d(),u("path",{key:8,fill:t.color,d:"M117.8,35.64,91.86,9.89A6.65,6.65,0,0,0,87.28,8a6.47,6.47,0,0,0-4.56,1.91l-65.5,66a6.4,6.4,0,0,0-1.73,3.21l-7.06,33A6.46,6.46,0,0,0,14.75,120a6.66,6.66,0,0,0,1.4-.15l33-7.3a6.47,6.47,0,0,0,3.19-1.76l65.5-66A6.46,6.46,0,0,0,117.8,35.64ZM44.5,100.33l-10.86,2.4-8.21-8.29,2.29-10.76L87.34,23.61l16.77,16.65Z"},null,8,Ht)):v("",!0),t.symbol==="width"?(d(),u("g",{key:9,fill:t.color},Ut,8,Dt)):v("",!0),t.symbol==="export"?(d(),u("g",{key:10,fill:t.color,transform:"translate(22 6)"},zt,8,Kt)):v("",!0),t.symbol==="other"?(d(),u("g",{key:11,fill:t.color},jt,8,Ft)):v("",!0),t.symbol==="move"?(d(),u("g",{key:12,fill:t.color,transform:"translate(0 1)"},Qt,8,Yt)):v("",!0),t.symbol==="rotate"?(d(),u("g",{key:13,fill:t.color,transform:"translate(1.5 1)"},no,8,eo)):v("",!0),t.symbol==="undo"?(d(),u("g",{key:14,fill:t.color},so,8,ao)):v("",!0),t.symbol==="redo"?(d(),u("g",{key:15,fill:t.color},ro,8,co)):v("",!0),t.symbol==="trash"?(d(),u("g",{key:16,fill:t.color},fo,8,uo)):v("",!0),t.symbol==="info"?(d(),u("g",{key:17,fill:t.color},bo,8,po)):v("",!0)]))}});const wo=["aria-label"],Co={key:0,class:"icon"},xo={class:"content"},$o={key:1,class:"label"},Vo=C({props:{icon:null,label:null,checked:{type:Boolean,default:!1},edge:{default:"both"},cornerStyle:{default:"default"},disabled:{type:Boolean,default:!1},enableFlash:{type:Boolean,default:!0}},emits:["check"],setup(t,{emit:e}){const o=t;O(s=>({"329fbb79":r(L).textColor}));const n=P(!1),a=async()=>{const s=!o.checked;e("check",s),s&&o.enableFlash&&(n.value=!0,await ge(100),n.value=!1)},l=f(()=>o.cornerStyle==="round"?"18px":"4px"),c=f(()=>({borderRadius:{left:[!0,!1,!1,!0],right:[!1,!0,!0,!1],both:[!0,!0,!0,!0],none:[!1,!1,!1,!1]}[o.edge].map(p=>p?l.value:"0").join(" "),borderRightWidth:o.edge==="right"||o.edge==="both"?"1px":"0"}));return(s,p)=>(d(),u("button",{class:W(["PaletteItem",{PaletteItem__disabled:t.disabled,PaletteItem__checked:t.checked,PaletteItem__flash:n.value}]),style:z(Ie({},r(c))),onPointerdown:a,"aria-label":t.label||t.icon||""},[t.icon?(d(),u("span",Co,[h(Re,{symbol:t.icon},null,8,["symbol"])])):v("",!0),i("div",xo,[X(s.$slots,"default",{},void 0,!0)]),t.label?(d(),u("span",$o,R(t.label),1)):v("",!0)],46,wo))}});var U=k(Vo,[["__scopeId","data-v-240795da"]]);const ko={class:"CheckItem"},Y=C({props:{modelValue:{type:Boolean},label:{default:""},icon:null,edge:null,cornerStyle:null},emits:["update:modelValue"],setup(t,{emit:e}){const o=n=>{e("update:modelValue",n)};return(n,a)=>(d(),u("div",ko,[h(U,{label:t.label,icon:t.icon,checked:t.modelValue,edge:t.edge,cornerStyle:t.cornerStyle,onCheck:o},{default:S(()=>[X(n.$slots,"default")]),_:3},8,["label","icon","checked","edge","cornerStyle"])]))}});const Io=["value","aria-label"],So=C({props:{modelValue:null,label:null},emits:["update:modelValue"],setup(t,{emit:e}){const o=P(),n=()=>{var l;(l=o.value)==null||l.click()},a=l=>{e("update:modelValue",l.target.value)};return(l,c)=>(d(),u("div",{class:"ColorSelector",onPointerdown:n},[i("div",{class:"view",style:z({backgroundColor:t.modelValue})},null,4),i("input",{type:"color",ref_key:"inp",ref:o,value:t.modelValue,onInput:c[0]||(c[0]=s=>a(s)),"aria-label":t.label||""},null,40,Io)],32))}});var Ao=k(So,[["__scopeId","data-v-bf80c612"]]);const Eo={class:"ColorSelectItem"},Lo=C({props:{modelValue:null,checked:{type:Boolean,default:!1},icon:null,edge:null,label:null},emits:["update:modelValue","update:checked"],setup(t,{emit:e}){const o=t,n=f({get:()=>o.modelValue,set:l=>{e("update:modelValue",l)}}),a=f({get:()=>o.checked,set:l=>{e("update:checked",l)}});return(l,c)=>(d(),u("div",Eo,[h(Y,{icon:t.icon,edge:t.edge,modelValue:r(a),"onUpdate:modelValue":c[1]||(c[1]=s=>H(a)?a.value=s:null)},{default:S(()=>[h(Ao,{modelValue:r(n),"onUpdate:modelValue":c[0]||(c[0]=s=>H(n)?n.value=s:null),label:t.label||t.icon},null,8,["modelValue","label"])]),_:1},8,["icon","edge","modelValue"])]))}});const To={class:"Slider"},Mo={class:"label"},Po={class:"value"},Ro=C({props:{min:{default:0},max:{default:100},step:{default:1},modelValue:null,label:{default:""}},emits:["update:modelValue","close"],setup(t,{emit:e}){const o=t;O(g=>({"960077ba":r(L).themeColor}));const n=120,a=N({isDragging:!1}),l=f(()=>(o.modelValue-o.min)/(o.max-o.min)),c=g=>{const $=q(g.offsetX/n,0,1),b=pe(o.min+$*(o.max-o.min),o.step,o.min);e("update:modelValue",b)},s=g=>{c(g),a.isDragging=!0},p=g=>{!a.isDragging||c(g)},x=async g=>{!a.isDragging||(c(g),a.isDragging=!1,await ge(200),A())},A=()=>{e("close")};return(g,$)=>(d(),u("div",To,[i("span",Mo,R(t.label),1),i("div",{class:"bar",onPointerdown:s,onPointermove:p,onPointercancel:x,onPointerup:x},[i("div",{class:"fill",style:z({transform:`scaleX(${r(l)})`})},null,4),i("div",Po,R(t.modelValue),1)],32)]))}});var Ho=k(Ro,[["__scopeId","data-v-15746d76"]]);const Do=5,He=(t,e,o)=>{document.body.style.cursor="ew-resize";const n=t.screenX;let a=!1;const l=s=>{s.preventDefault();const p=s.screenX-n;!a&&Math.abs(p)<Do||(e(p),a=!0)},c=()=>{document.body.removeEventListener("pointermove",l),document.body.removeEventListener("pointerup",c),document.body.removeEventListener("pointercancel",c),document.body.style.cursor="",o(a)};document.body.addEventListener("pointermove",l),document.body.addEventListener("pointerup",c),document.body.addEventListener("pointercancel",c)},De=te("toolbar",{state:()=>({activeItemId:""})});const Oo={class:"SliderItem"},Bo={key:0,class:"slider"},Zo=C({props:{min:{default:0},max:{default:100},modelValue:null,step:{default:1},label:{default:""},unit:{default:""},icon:null,edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,n=De(),a=`slider-${Math.random()}`,l=N({startValue:0,isSliderVisible:!1}),c=120;V(()=>n.$state.activeItemId,()=>{n.$state.activeItemId!==a&&(l.isSliderVisible=!1)});const s=()=>{n.$state.activeItemId===a&&(n.$state.activeItemId="")};V(()=>o.disabled,()=>{o.disabled&&s()});const p=g=>{l.startValue=o.modelValue,l.isSliderVisible=!0,n.$state.activeItemId=a,He(g,$=>{const b=c/(o.max-o.min),I=q(pe(l.startValue+$/b,o.step,o.min),o.min,o.max);e("update:modelValue",I)},$=>{$&&s()})},x=g=>{o.disabled||(l.isSliderVisible?s():p(g))},A=g=>{e("update:modelValue",g)};return(g,$)=>(d(),u("div",Oo,[h(U,{onPointerdown:Se(x,["prevent"]),label:`${t.modelValue}${t.unit}`,icon:t.icon,edge:t.edge,disabled:t.disabled},null,8,["onPointerdown","label","icon","edge","disabled"]),r(l).isSliderVisible?(d(),u("div",Bo,[h(Ho,{modelValue:t.modelValue,"onUpdate:modelValue":A,label:t.label,min:t.min,max:t.max,onClose:s},null,8,["modelValue","label","min","max"])])):v("",!0)]))}});var re=k(Zo,[["__scopeId","data-v-6e436782"]]);const Uo={class:"SwitchList"},Ko={class:"label"},No={class:"list"},Wo=["onPointerdown"],zo={key:0,class:"icon"},Fo=C({props:{options:{default:()=>[]},modelValue:null,label:null},emits:["update:modelValue","close"],setup(t,{emit:e}){O(n=>({cc48325a:r(L).themeColor}));const o=async n=>{e("update:modelValue",n),await ge(200),e("close")};return(n,a)=>(d(),u("div",Uo,[i("div",Ko,R(t.label),1),i("ul",No,[(d(!0),u(_e,null,qe(t.options,l=>(d(),u("li",{key:l.key,class:W(["opt",{selected:l.key===t.modelValue}]),onPointerdown:c=>o(l.key)},[l.icon?(d(),u("div",zo,[h(Re,{symbol:l.icon},null,8,["symbol"])])):v("",!0)],42,Wo))),128))])]))}});var Go=k(Fo,[["__scopeId","data-v-67aa5a3d"]]);const Xo={class:"SwitchItem"},qo={class:"list"},jo=C({props:{modelValue:null,options:{default:()=>[]},label:{default:""},edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const o=t,n=f(()=>o.options.find(b=>b.key===o.modelValue)),a=f(()=>o.options.findIndex(b=>b.key===o.modelValue)),l=De(),c=`switch-${Math.random()}`,s=N({startIndex:0,isListVisible:!1}),p=120;V(()=>l.$state.activeItemId,()=>{l.$state.activeItemId!==c&&(s.isListVisible=!1)});const x=()=>{l.$state.activeItemId===c&&(l.$state.activeItemId="")};V(()=>o.disabled,()=>{o.disabled&&x()});const A=b=>{s.startIndex=a.value,s.isListVisible=!0,l.$state.activeItemId=c,He(b,I=>{const y=p,_=q(pe(s.startIndex+I/y,1,0),0,o.options.length-1);e("update:modelValue",o.options[_].key)},I=>{I&&x()})},g=b=>{o.disabled||(s.isListVisible?x():A(b))},$=b=>{e("update:modelValue",b)};return(b,I)=>{var y;return d(),u("div",Xo,[h(U,{onPointerdown:Se(g,["prevent"]),icon:(y=r(n))==null?void 0:y.icon,edge:t.edge,disabled:t.disabled},null,8,["onPointerdown","icon","edge","disabled"]),je(i("div",qo,[h(Go,{label:t.label,options:t.options,modelValue:t.modelValue,"onUpdate:modelValue":$,onClose:x},null,8,["label","options","modelValue"])],512),[[Ye,r(s).isListVisible]])])}}});var be=k(jo,[["__scopeId","data-v-37f8942c"]]);const J=te("app",{state:()=>({modal:void 0,toast:""})});const Yo={class:"radioGroup"},Jo={class:"radioGroup"},Qo={class:"radioGroup penGroup penGroup__1st"},en={class:"radioGroup penGroup penGroup__2nd"},tn=C({setup(t){O(_=>({"08dd12e5":r(y)[0],"08dd1304":r(y)[1]}));const e=le(),o=J(),n=f({set:_=>{e.penCount=[_,e.penCount[1]]},get:()=>e.penCount[0]}),a=f({set:_=>{e.penCount=[e.penCount[0],_]},get:()=>e.penCount[1]}),l=f({set:_=>{a.value=_?n.value:0},get:()=>a.value>=1}),c=[{key:"line",label:"line",icon:"line"},{key:"free",label:"free",icon:"freehand"}],s=f({set:_=>{e.isStraight=_==="line"},get:()=>e.isStraight?"line":"free"}),p=f({get:()=>e.tool==="draw"&&!e.isEraser,set:_=>{!_||(e.tool="draw",e.isEraser=!1)}}),x=f({get:()=>e.tool==="draw"&&e.isEraser,set:_=>{!_||(e.tool="draw",e.isEraser=!0)}}),A=[{key:"mirror",label:"mirror",icon:"mode_mirror"},{key:"kaleido",label:"kaleido",icon:"mode_kaleido"}],g=f({set:_=>{e.isKaleido=[_==="kaleido",e.isKaleido[1]]},get:()=>e.isKaleido[0]?"kaleido":"mirror"}),$=f({set:_=>{e.isKaleido=[e.isKaleido[0],_==="kaleido"]},get:()=>e.isKaleido[1]?"kaleido":"mirror"}),b=()=>{o.$state.modal||(o.$state.modal="export")},I=_=>{const m=_.target;if(m&&m instanceof HTMLInputElement&&m.type==="color")return!0;_.preventDefault()},y=f(()=>{const _="#ccc";return e.$state.penCount[1]===0?[L.anchorColor[0],"transparent"]:[_,L.anchorColor[1]]});return(_,m)=>(d(),u("div",{class:"Toolbar",onTouchstart:I},[i("div",Yo,[h(Lo,{modelValue:r(e).$state.penColor,"onUpdate:modelValue":m[0]||(m[0]=w=>r(e).$state.penColor=w),checked:r(p),"onUpdate:checked":m[1]||(m[1]=w=>p.value=w),edge:"left",icon:"pen",label:"pen color"},null,8,["modelValue","checked"]),h(Y,{modelValue:r(x),"onUpdate:modelValue":m[2]||(m[2]=w=>H(x)?x.value=w:null),edge:"right",icon:"eraser"},null,8,["modelValue"])]),i("div",Jo,[h(re,{modelValue:r(e).penOpacity,"onUpdate:modelValue":m[3]||(m[3]=w=>r(e).penOpacity=w),label:"Opacity",icon:"opacity",min:1,max:100,edge:"left"},null,8,["modelValue"]),h(re,{modelValue:r(e).penWidth,"onUpdate:modelValue":m[4]||(m[4]=w=>r(e).penWidth=w),label:"Width",icon:"width",min:1,max:50,edge:"none"},null,8,["modelValue"]),h(be,{label:"LineType",modelValue:r(s),"onUpdate:modelValue":m[5]||(m[5]=w=>H(s)?s.value=w:null),options:c,edge:"right"},null,8,["modelValue"])]),i("div",Qo,[h(re,{modelValue:r(n),"onUpdate:modelValue":m[6]||(m[6]=w=>H(n)?n.value=w:null),label:"PenCount",icon:"count",min:r(se).min,max:r(se).max,edge:"left"},null,8,["modelValue","min","max"]),h(be,{label:"MirrorType",modelValue:r(g),"onUpdate:modelValue":m[7]||(m[7]=w=>H(g)?g.value=w:null),options:A,edge:"right"},null,8,["modelValue"])]),i("div",en,[h(Y,{modelValue:r(l),"onUpdate:modelValue":m[8]||(m[8]=w=>H(l)?l.value=w:null),edge:"left",icon:"2nd"},null,8,["modelValue"]),h(re,{modelValue:r(a),"onUpdate:modelValue":m[9]||(m[9]=w=>H(a)?a.value=w:null),label:"PenCount",icon:"count",min:r(ce).min,max:r(ce).max,edge:"none",disabled:!r(l)},null,8,["modelValue","min","max","disabled"]),h(be,{label:"MirrorType",modelValue:r($),"onUpdate:modelValue":m[10]||(m[10]=w=>H($)?$.value=w:null),options:A,edge:"right",disabled:!r(l)},null,8,["modelValue","disabled"])]),h(U,{icon:"export",onCheck:b})],32))}});var on=k(tn,[["__scopeId","data-v-4d90c331"]]);const nn=(t=1)=>{let e=[];const o=[],n=()=>{const c=new Promise(s=>{o.push(s)});return l(),c},a=c=>{e=e.filter(s=>s!==c),l()},l=()=>{if(e.length>=t)return;const c=o.shift();if(!c)return;const s=Symbol();e.push(s),c(()=>{a(s)})};return n},an=nn();let Q;const we=te("confirm",{state:()=>({content:void 0}),actions:{async confirm(t,e,o,n="normal"){const a=await an();this.content={message:t,yesCaption:e,noCaption:o,kind:n};const l=await new Promise(c=>{Q=c});return a(),this.content=void 0,Q=void 0,l},select(t){this.content&&(this.content.answer=t),Q==null||Q(t)}}}),ln=t=>{const e=()=>{document.visibilityState==="visible"&&t()};he(()=>{document.addEventListener("visibilitychange",e)}),Ae(()=>{document.removeEventListener("visibilitychange",e)})},sn=()=>{const t=Array.from(document.querySelectorAll("script")).map(e=>e.src).filter(e=>e.includes("/assets/index."))[0];return t!=null?t:void 0},cn=async t=>{try{const e=await window.fetch(t,{method:"HEAD"});return e.status===200||e.status===304?!0:e.status===404?!1:void 0}catch{return}},Oe=async()=>{const t=sn();return!(!t||await cn(t)!==!1)},rn=()=>!!navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,dn=60;let Be=rn()?0:Date.now();const Ze=P(!1),Ue=async()=>{const t=Date.now();t-Be<dn*1e3||(Be=t,Ze.value=await Oe())},un=()=>(Ue(),ln(Ue),Ze);const hn={class:"clear"},_n={class:"undo"},mn={class:"info"},vn=C({setup(t){const{state:e,clear:o,undo:n,enableUndo:a}=ie(),{confirm:l}=we(),c=J(),s=un(),p=f({set:b=>{b?e.tool="rotate:anchor":e.tool="draw"},get:()=>e.tool==="rotate:anchor"}),x=f({set:b=>{b?e.tool="scroll:anchor":e.tool="draw"},get:()=>e.tool==="scroll:anchor"}),A=async()=>{await l("Are you sure you want to clear all the canvas? This operation can not undo.","CLEAR","not clear","danger")==="yes"&&o()},g=()=>{c.modal="start"},$=b=>{b.preventDefault()};return(b,I)=>(d(),u("div",{class:"SideToolbar",onTouchstart:$},[h(Y,{modelValue:r(p),"onUpdate:modelValue":I[0]||(I[0]=y=>H(p)?p.value=y:null),icon:"rotate",cornerStyle:"round"},null,8,["modelValue"]),h(Y,{modelValue:r(x),"onUpdate:modelValue":I[1]||(I[1]=y=>H(x)?x.value=y:null),icon:"move",cornerStyle:"round"},null,8,["modelValue"]),i("div",hn,[h(U,{onCheck:A,icon:"trash",label:"",disabled:!r(a),cornerStyle:"round"},null,8,["disabled"])]),i("div",_n,[h(U,{onCheck:r(n),icon:"undo",label:"",disabled:!r(a),cornerStyle:"round"},null,8,["onCheck","disabled"])]),i("div",mn,[i("div",{class:W(["infoItem",{infoItem__new:r(s)}])},[h(U,{onCheck:g,icon:"info",label:"",cornerStyle:"round"})],2)])],32))}});var fn=k(vn,[["__scopeId","data-v-323de4e7"]]);const pn={class:"CloseButton"},yn=C({props:{foreColor:{default:"#999"},bgColor:{default:"#fff"}},emits:["click"],setup(t,{emit:e}){const o=t;return O(n=>({"1bfcf254":o.foreColor,"4a4c6fab":o.bgColor})),(n,a)=>(d(),u("div",pn,[i("button",{onClick:a[0]||(a[0]=l=>e("click"))},"CLOSE")]))}});var Ke=k(yn,[["__scopeId","data-v-2398e41a"]]);const gn={class:"PlaneBox"},bn=C({props:{backgroundColor:{default:"#fff"}},setup(t){const e=t;return O(o=>({"38133a8c":e.backgroundColor})),(o,n)=>(d(),u("div",gn,[X(o.$slots,"default",{},void 0,!0)]))}});var Ne=k(bn,[["__scopeId","data-v-6d975671"]]);const We=async t=>{if(!t.naturalWidth||!t.naturalHeight)return;const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;const o=e.getContext("2d");if(!!o)return o.drawImage(t,0,0),new Promise(n=>{e.toBlob(a=>{n(a!=null?a:void 0)})})},wn=async t=>{let e;try{e=new ClipboardItem({"image/png":t})}catch{e=new ClipboardItem({"image/png":await t})}return await navigator.clipboard.write([e]),!0},Cn=async t=>{const e=We(t);return e?await wn(e.then(n=>{if(!n)throw new Error("failed to copy img");return n})).catch(n=>(console.warn(n),!1)):!1},xn=async t=>{const o={files:[new File([t],"image.png",{type:t.type,lastModified:Date.now()})],title:"Miracle Pencil",text:"Made with https://mirape.web.app  #\u30DF\u30E9\u30AF\u30EB\u30DA\u30F3\u30B7\u30EB"};return navigator.share(o)};const $n={class:"PureButton"},Vn=C({props:{color:{default:L.themeDark}},setup(t){const e=t;return O(o=>({"3824259e":e.color})),(o,n)=>(d(),u("button",$n,[X(o.$slots,"default",{},void 0,!0)]))}});var G=k(Vn,[["__scopeId","data-v-d8edf782"]]);const Ce=async t=>{const e=new Image;return e.src=URL.createObjectURL(t),new Promise(o=>{e.onload=e.onabort=e.onerror=()=>{o(e)}})},kn=async t=>{const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;const o=e.getContext("2d");if(!!o)return o.drawImage(t,0,0),o.globalCompositeOperation="source-atop",o.fillStyle="#fff",o.fillRect(0,0,e.width,e.height),new Promise(n=>{e.toBlob(a=>{!a||n(Ce(a))})})},In=t=>{const{data:e,width:o,height:n}=t,a=(y,_)=>e[(_*o+y)*4+3]===0,l=y=>{for(let _=0;_<o;_++)if(!a(_,y))return!1;return!0},c=()=>{for(let y=0;y<n;y++)if(!l(y))return y;return n},s=()=>{for(let y=n-1;y>=0;y--)if(!l(y))return y;return-1},p=(y,_,m)=>{for(let w=_;w<=m;w++)if(!a(y,w))return!1;return!0},x=(y,_)=>{for(let m=0;m<o;m++)if(!p(m,y,_))return m;return o},A=(y,_)=>{for(let m=o-1;m>=0;m--)if(!p(m,y,_))return m;return-1},g=c();if(g===n)return;const $=s(),b=x(g,$),I=A(g,$);return new DOMRect(b,g,I-b+1,$-g+1)},Sn=async t=>{const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;const o=e.getContext("2d");if(!o)return;o.drawImage(t,0,0);const n=o.getImageData(0,0,e.width,e.height),a=In(n);if(!a)return;const l=o.getImageData(a.x,a.y,a.width,a.height);return e.width=a.width,e.height=a.height,o.putImageData(l,0,0),new Promise(c=>{e.toBlob(s=>{!s||c(Ce(s))})})},An=()=>{const{toImgBlob:t}=ie(),e=N({original:void 0,cropped:void 0,texture:void 0}),o=(a,l)=>{e[a]={src:l.src,size:{w:l.naturalWidth,h:l.naturalHeight}}},n=async()=>{const a=await t();if(!a)return;const l=await Ce(a);o("original",l);const c=await Sn(l);c&&o("cropped",c);const s=c&&await kn(c);s&&o("texture",s)};return{imgs:Je(e),create:n}};const de=t=>(ne("data-v-7206c358"),t=t(),ae(),t),En={class:"ExportDialog"},Ln={class:"close"},Tn=de(()=>i("div",{class:"title"},"Export Image",-1)),Mn={class:"images"},Pn=de(()=>i("div",{class:"title"},"Original",-1)),Rn=["src"],Hn=de(()=>i("div",{class:"title"},"Cropped",-1)),Dn=["src"],On=de(()=>i("div",{class:"title"},"Texture",-1)),Bn=["src"],Zn={class:"buttons"},Un=Z("Copy"),Kn=Z("Share"),Nn=C({emits:["close"],setup(t,{emit:e}){O(T=>({c6ffcf08:r(L).themeLight}));const o=220,n=J(),a=N({selected:void 0}),{imgs:l,create:c}=An(),s=P(),p=P(),x=P(),A={original:s,cropped:p,texture:x},g=!!navigator.share,$=T=>{const M=l[T];if(!M)return{};const{w:K,h:xe}=M.size,$e=o/Math.max(K,xe,o);return{width:`${K*$e}px`,height:`${xe*$e}px`,backgroundColor:T==="texture"?"#000":"#fff"}},b=f(()=>$("original")),I=f(()=>$("cropped")),y=f(()=>$("texture")),_=f(()=>a.selected?A[a.selected].value:void 0),m=async()=>{if(!_.value)return;const T=await Cn(_.value);n.$state.toast=T?"copied!":"failed to copy img",a.selected&&T&&Le("export-copy",a.selected),T||Te("ExportDialog.copy","failed to copy")},w=async()=>{if(!_.value)return;const T=await We(_.value);!T||(await xn(T),a.selected&&Le("export-share",a.selected))};return c(),(T,M)=>(d(),u("div",En,[h(Ne,null,{default:S(()=>[i("div",Ln,[h(Ke,{onClick:M[0]||(M[0]=K=>e("close"))})]),Tn,i("div",Mn,[i("div",{class:W(["image",{selected:r(a).selected==="original"}])},[Pn,r(l).original?(d(),u("img",{key:0,src:r(l).original.src,style:z(r(b)),ref_key:"originalImgRef",ref:s,onClick:M[1]||(M[1]=K=>r(a).selected="original")},null,12,Rn)):v("",!0)],2),i("div",{class:W(["image",{selected:r(a).selected==="cropped"}])},[Hn,r(l).cropped?(d(),u("img",{key:0,src:r(l).cropped.src,style:z(r(I)),ref_key:"croppedImgRef",ref:p,onClick:M[2]||(M[2]=K=>r(a).selected="cropped")},null,12,Dn)):v("",!0)],2),i("div",{class:W(["image",{selected:r(a).selected==="texture"}])},[On,r(l).texture?(d(),u("img",{key:0,src:r(l).texture.src,style:z(r(y)),ref_key:"textureImgRef",ref:x,onClick:M[3]||(M[3]=K=>r(a).selected="texture")},null,12,Bn)):v("",!0)],2)]),i("div",Zn,[h(G,{onClick:m,disabled:!r(a).selected},{default:S(()=>[Un]),_:1},8,["disabled"]),g?(d(),B(G,{key:0,onClick:w,disabled:!r(a).selected},{default:S(()=>[Kn]),_:1},8,["disabled"])):v("",!0)])]),_:1})]))}});var Wn=k(Nn,[["__scopeId","data-v-7206c358"]]);const zn="https://github.com/yuneco/miracle-pencil",Fn="0.0.3",Gn="2022.01.02",Xn="@yuneco",qn="https://twitter.com/yuneco";var ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",REPOSITORY:zn,VERSION:Fn,RELEASE_DATE:Gn,AUTHOR:Xn,AUTHOR_TW:qn});const ue=t=>(ne("data-v-61268eec"),t=t(),ae(),t),jn={class:"StartDialog"},Yn={class:"close"},Jn={class:"content"},Qn=ue(()=>i("div",{class:"title"},"Miracle Pencil",-1)),ea={class:"body"},ta={class:"item"},oa=ue(()=>i("dd",null,"Version",-1)),na={class:"item"},aa=ue(()=>i("dd",null,"Release",-1)),la={class:"item"},sa=ue(()=>i("dd",null,"Made by",-1)),ca=["href"],ia={class:"repo"},ra=Z(" See "),da=["href"],ua=Z(" for more information. "),ha={key:0,class:"new"},_a={class:"buttons"},ma=Z("OK"),va=Z("Reload App"),fa=C({emits:["close"],setup(t,{emit:e}){const{confirm:o}=we(),n=async()=>{await o("Reloading screen will clear the canvas. Is it ok with you?","RELOAD","Cancel","danger")==="yes"&&window.location.reload()},a=P(!1);return he(async()=>{a.value=await Oe()}),(l,c)=>(d(),u("div",jn,[h(Ne,{backgroundColor:r(L).themeDark},{default:S(()=>[i("div",Yn,[h(Ke,{onClick:c[0]||(c[0]=s=>e("close")),bgColor:r(L).themeDark,foreColor:"#fff"},null,8,["bgColor"])]),i("div",Jn,[Qn,i("div",ea,[i("dl",null,[i("div",ta,[oa,i("dt",null,R(r(ee).VERSION),1)]),i("div",na,[aa,i("dt",null,R(r(ee).RELEASE_DATE),1)]),i("div",la,[sa,i("dt",null,[i("a",{href:r(ee).AUTHOR_TW,target:"blank",rel:"noopener"},R(r(ee).AUTHOR),9,ca)])])]),i("div",ia,[ra,i("a",{href:r(ee).REPOSITORY,target:"blank",rel:"noopener"},"GitHub repository",8,da),ua]),a.value?(d(),u("div",ha," \u{1F31F} New version available. Tap 'Reload' to update. ")):v("",!0)]),i("div",_a,[h(G,{onClick:c[1]||(c[1]=s=>e("close"))},{default:S(()=>[ma]),_:1}),h(G,{onClick:n},{default:S(()=>[va]),_:1})])])]),_:1},8,["backgroundColor"])]))}});var pa=k(fa,[["__scopeId","data-v-61268eec"]]);const ya=t=>(ne("data-v-dc5f83b6"),t=t(),ae(),t),ga={key:0,class:"Modal"},ba=ya(()=>i("div",{class:"bg"},null,-1)),wa={class:"content"},Ca=C({setup(t){const e=Qe(),o=f(()=>{var a,l;return((l=(a=e.default)==null?void 0:a.call(e))!=null?l:[]).some(c=>c.el||typeof c.type=="object")});return(n,a)=>(d(),B(me,{to:"body"},[h(oe,{name:"fade",appear:""},{default:S(()=>[r(o)?(d(),u("div",ga,[ba,i("div",wa,[X(n.$slots,"default",{},void 0,!0)])])):v("",!0)]),_:3})]))}});var xa=k(Ca,[["__scopeId","data-v-dc5f83b6"]]);const $a=C({setup(t){const e=J(),o=f(()=>e.$state.modal);V(()=>o.value,a=>{!a||_t(a)});const n=()=>{e.modal=void 0};return(a,l)=>(d(),B(xa,null,{default:S(()=>[r(o)==="start"?(d(),B(pa,{key:0,onClose:n})):v("",!0),r(o)==="export"?(d(),B(Wn,{key:1,onClose:n})):v("",!0)]),_:1}))}}),Va=(t,e)=>{const o=et(t.value);let n=[];return V(t,()=>{const a=t.value,l=setTimeout(()=>{o.value=a,n=n.filter(c=>c!==l)},e);n.push(l)}),Ae(()=>{n.forEach(a=>clearTimeout(a))}),o};const ka={key:0,class:"Toast"},Ia={class:"content"},Sa=C({setup(t){const e=1500,o=1e3,n=J(),a=f(()=>n.$state.toast),l=Va(a,o),c=f(()=>a.value||l.value);let s=0;return V(a,()=>{window.clearTimeout(s),!!a.value&&(s=window.setTimeout(()=>{n.$state.toast=""},e))}),(p,x)=>(d(),B(me,{to:"body"},[h(oe,{name:"fade",appear:""},{default:S(()=>[r(a)?(d(),u("div",ka,[i("div",Ia,R(r(c)),1)])):v("",!0)]),_:1})]))}});var Aa=k(Sa,[["__scopeId","data-v-207abe4c"]]);const Ea=t=>(ne("data-v-fd5d9dc0"),t=t(),ae(),t),La={key:0,class:"ConfirmBox"},Ta=Ea(()=>i("div",{class:"bg"},null,-1)),Ma={class:"content"},Pa={class:"text"},Ra={class:"buttons"},Ha=C({setup(t){const e=we(),o=f(()=>e.$state.content),n=f(()=>{var a;return((a=o.value)==null?void 0:a.kind)==="danger"?L.danger:L.themeDark});return(a,l)=>(d(),B(me,{to:"body"},[h(oe,{name:"fade"},{default:S(()=>[r(o)?(d(),u("div",La,[Ta,i("div",Ma,[i("div",Pa,R(r(o).message),1),i("div",Ra,[h(G,{onClick:l[0]||(l[0]=c=>r(e).select("yes")),class:"yes",color:r(n)},{default:S(()=>[Z(R(r(o).yesCaption),1)]),_:1},8,["color"]),r(o).noCaption?(d(),B(G,{key:0,onClick:l[1]||(l[1]=c=>r(e).select("no")),class:"no"},{default:S(()=>[Z(R(r(o).noCaption),1)]),_:1})):v("",!0)])])])):v("",!0)]),_:1})]))}});var Da=k(Ha,[["__scopeId","data-v-fd5d9dc0"]]);const Oa={class:"toolbar"},Ba={class:"sidetoolbar"},Za={class:"canvas"},Ua={class:"moldals"},Ka={class:"toast"},Na={class:"confirm"},Wa=C({setup(t){return(e,o)=>(d(),u(_e,null,[i("div",Oa,[h(on)]),i("div",Ba,[h(fn)]),i("div",Za,[h(xt)]),i("div",Ua,[h($a)]),i("div",Ka,[h(Aa)]),i("div",Na,[h(Da)])],64))}});tt(Wa).use(ot()).mount("#app");
