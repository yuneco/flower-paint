var U=Object.defineProperty;var x=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||(e={}))A.call(e,n)&&k(t,n,e[n]);if(x)for(var n of x(e))K.call(e,n)&&k(t,n,e[n]);return t};import{d as T,a as f,r as w,o as X,b as P,w as g,c as v,e as p,n as b,f as V,g as d,h as _,i as D,t as C,u as c,j as M,k as m,l as N,v as B,m as O,p as y,F,q as j,s as z}from"./vendor.f3832b12.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};G();const R=T("canvas",{state:()=>({penColor:"#3399aa",penCount:[6,0],isKaleido:[!0,!0],penWidth:20,isStraight:!1})});var h=(t,e)=>{const n=t.__vccOpts||t;for(const[l,a]of e)n[l]=a;return n};const H=f({setup(t){const e=R(),n=w();let l;return X(()=>{console.log("moun");const a=n.value;if(!a)return;const o=l=new P.exports.PaintCanvas(a,a.offsetWidth,a.offsetHeight);o.penCount=e.penCount,o.penColor=e.penColor,o.penWidth=e.penWidth,o.tool=e.isStraight?"draw:line":"draw",o.isKaleido=e.isKaleido,a.addEventListener("touchmove",s=>{s.preventDefault()}),o.listenRequestZoom(s=>{o.coord=o.coord.clone({scale:s})}),o.listenRequestScrollTo(s=>{o.coord=o.coord.clone({scroll:s})}),o.listenRequestRotateTo(s=>{o.coord=o.coord.clone({angle:s})}),o.listenRequestUndo(()=>{o.undo()}),o.listenRequestAnchorTransform(({coord:s,target:r})=>{r==="root"&&(o.anchor=s),r==="child"&&(o.childAnchor=s)}),o.listenRequestAnchorReset(()=>{o.anchor=new P.exports.Coordinate})}),g(()=>[e.$state.penColor],()=>{!l||(l.penColor=e.$state.penColor)}),g(()=>[e.$state.penCount],()=>{!l||(l.penCount=e.$state.penCount)}),g(()=>[e.$state.penWidth],()=>{!l||(l.penWidth=e.$state.penWidth)}),g(()=>[e.$state.isStraight],()=>{!l||(l.tool=e.isStraight?"draw:line":"draw")}),g(()=>[e.$state.isKaleido],()=>{!l||(l.isKaleido=e.isKaleido)}),(a,o)=>(v(),p("div",{class:"PaintCanvas",ref:(s,r)=>{r.el=s,n.value=s}},null,512))}});var Z=h(H,[["__scopeId","data-v-4140ad12"]]);const J=["value"],Q=f({props:{modelValue:null,icon:null},emits:["update:modelValue"],setup(t,{emit:e}){const n=w(),l=()=>{var o;(o=n.value)==null||o.click()},a=o=>{e("update:modelValue",o.target.value)};return(o,s)=>(v(),p("label",{class:"ColorSelector",onClick:l},[t.icon?(v(),p("div",{key:0,class:"icon",style:b({backgroundImage:`url(${t.icon})`})},null,4)):V("",!0),d("div",{class:"view",style:b({backgroundColor:t.modelValue})},null,4),d("input",{type:"color",ref:(r,i)=>{i.inp=r,n.value=r},value:t.modelValue,onInput:s[0]||(s[0]=r=>a(r))},null,40,J)]))}});var Y=h(Q,[["__scopeId","data-v-2604ec29"]]);const ee=(t,e,n)=>Math.max(e,Math.min(n,t)),te=(t,e,n=0)=>n+Math.round((t-n)/e)*e;const ne={class:"content"},oe={key:1,class:"label"},le=f({props:{icon:null,label:null,checked:{type:Boolean,default:!1},edge:{default:"both"}},emits:["check"],setup(t,{emit:e}){const n=t,l=()=>{e("check",!n.checked)},a=_(()=>({borderRadius:{left:[!0,!1,!1,!0],right:[!1,!0,!0,!1],both:[!0,!0,!0,!0],none:[!1,!1,!1,!1]}[n.edge].map(s=>s?"4px":"0").join(" "),borderRightWidth:n.edge==="right"||n.edge==="both"?"1px":"0"}));return(o,s)=>(v(),p("button",{class:"PaletteItem",style:b(I({backgroundColor:t.checked?"#ddd":"#fff"},c(a))),onClick:l},[t.icon?(v(),p("span",{key:0,class:"icon",style:b({backgroundImage:`url(${t.icon})`})},null,4)):V("",!0),d("div",ne,[D(o.$slots,"default",{},void 0,!0)]),t.label?(v(),p("span",oe,C(t.label),1)):V("",!0)],4))}});var L=h(le,[["__scopeId","data-v-750dce04"]]);const ae={class:"Slider"},se={class:"label"},re={class:"bar"},ie={class:"value"},ue=f({props:{min:{default:0},max:{default:100},value:null,label:{default:""}},setup(t){const e=t,n=_(()=>(e.value-e.min)/(e.max-e.min));return(l,a)=>(v(),p("div",ae,[d("span",se,C(t.label),1),d("div",re,[d("div",{class:"fill",style:b({transform:`scaleX(${c(n)})`})},null,4),d("div",ie,C(t.value),1)])]))}});var de=h(ue,[["__scopeId","data-v-28017eca"]]);const ce=["onPointerdown"],me={class:"slider"},ve=f({props:{min:{default:0},max:{default:100},modelValue:null,step:{default:1},label:{default:""},unit:{default:""},icon:null,edge:null},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,l=M({startX:0,startValue:0,isSliderVisible:!1}),a=120,o=s=>{l.startX=s.screenX,l.startValue=n.modelValue,l.isSliderVisible=!0,document.body.style.cursor="ew-resize";const r=u=>{u.preventDefault();const W=u.screenX-l.startX,E=a/(n.max-n.min),q=ee(te(l.startValue+W/E,n.step,n.min),n.min,n.max);e("update:modelValue",q)},i=()=>{l.isSliderVisible=!1,document.body.removeEventListener("pointermove",r),document.body.removeEventListener("pointerup",i),document.body.removeEventListener("pointercancel",i),document.body.style.cursor=""};document.body.addEventListener("pointermove",r),document.body.addEventListener("pointerup",i),document.body.addEventListener("pointercancel",i)};return(s,r)=>(v(),p("div",{class:"SliderItem",onPointerdown:O(o,["prevent"])},[m(L,{label:`${t.modelValue}${t.unit}`,icon:t.icon,edge:t.edge},null,8,["label","icon","edge"]),N(d("div",me,[m(de,{value:t.modelValue,label:t.label,min:t.min,max:t.max},null,8,["value","label","min","max"])],512),[[B,c(l).isSliderVisible]])],40,ce))}});var $=h(ve,[["__scopeId","data-v-7a6e2126"]]);const pe={class:"CheckItem"},S=f({props:{modelValue:{type:Boolean},label:{default:""},icon:null,edge:null},emits:["update:modelValue"],setup(t,{emit:e}){const n=l=>{e("update:modelValue",l)};return(l,a)=>(v(),p("div",pe,[m(L,{label:t.label,icon:t.icon,checked:t.modelValue,edge:t.edge,onCheck:n},null,8,["label","icon","checked","edge"])]))}});const fe={class:"Toolbar"},_e={class:"radioGroup"},he={class:"radioGroup"},ge=f({setup(t){const e=R(),n=_({set:r=>{e.penCount=[r,e.penCount[1]]},get:()=>e.penCount[0]}),l=_({set:r=>{e.penCount=[e.penCount[0],r]},get:()=>e.penCount[1]}),a=_({set:r=>{l.value=r?n.value:0},get:()=>l.value>=1}),o=_({set:r=>{e.isStraight=r},get:()=>e.isStraight}),s=_({set:r=>{e.isStraight=!r},get:()=>!e.isStraight});return(r,i)=>(v(),p("div",fe,[m(Y,{modelValue:c(e).$state.penColor,"onUpdate:modelValue":i[0]||(i[0]=u=>c(e).$state.penColor=u)},null,8,["modelValue"]),d("div",_e,[m(S,{modelValue:c(o),"onUpdate:modelValue":i[1]||(i[1]=u=>y(o)?o.value=u:null),edge:"left",icon:"icons/icon-line.svg"},null,8,["modelValue"]),m(S,{modelValue:c(s),"onUpdate:modelValue":i[2]||(i[2]=u=>y(s)?s.value=u:null),edge:"right",icon:"icons/icon-freehand.svg"},null,8,["modelValue"])]),m($,{modelValue:c(n),"onUpdate:modelValue":i[3]||(i[3]=u=>y(n)?n.value=u:null),label:"PenCount",icon:"icons/icon-count.svg",min:1,max:16},null,8,["modelValue"]),d("div",he,[m(S,{modelValue:c(a),"onUpdate:modelValue":i[4]||(i[4]=u=>y(a)?a.value=u:null),edge:"left",icon:"icons/icon-2nd.svg"},null,8,["modelValue"]),m($,{modelValue:c(l),"onUpdate:modelValue":i[5]||(i[5]=u=>y(l)?l.value=u:null),label:"PenCount",icon:"icons/icon-count.svg",min:1,max:16,edge:"right"},null,8,["modelValue"])]),m($,{modelValue:c(e).penWidth,"onUpdate:modelValue":i[6]||(i[6]=u=>c(e).penWidth=u),label:"Width",icon:"icons/icon-width.svg",min:1,max:50},null,8,["modelValue"])]))}});var be=h(ge,[["__scopeId","data-v-3354a236"]]);const ye={class:"toolbar"},Ve={class:"canvas"},Ce=f({setup(t){return(e,n)=>(v(),p(F,null,[d("div",ye,[m(be)]),d("div",Ve,[m(Z)])],64))}});var $e=h(Ce,[["__scopeId","data-v-8c26eca0"]]);j($e).use(z()).mount("#app");
