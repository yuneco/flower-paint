var oe=Object.defineProperty;var L=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var T=(l,e,t)=>e in l?oe(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,M=(l,e)=>{for(var t in e||(e={}))le.call(e,t)&&T(l,t,e[t]);if(L)for(var t of L(e))ne.call(e,t)&&T(l,t,e[t]);return l};import{d as K,a as y,r as U,o as ae,b as A,w as C,c as v,e as _,f as g,n as k,g as S,h as f,i as W,t as N,j as B,u,k as p,l as H,m as h,p as w,q,F as X,s as se,v as ie,x as de,y as re,z as ue}from"./vendor.eebc7a44.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};ce();const z=K("canvas",{state:()=>({penColor:"#3399aa",penCount:[6,0],isKaleido:[!0,!0],penWidth:20,isStraight:!1,isEraser:!1,penOpacity:100})});var $=(l,e)=>{const t=l.__vccOpts||l;for(const[a,n]of e)t[a]=n;return t};const me=y({setup(l){const e=z(),t=U();let a;return ae(()=>{console.log("moun");const n=t.value;if(!n)return;const o=a=new A.exports.PaintCanvas(n,n.offsetWidth,n.offsetHeight);o.penCount=e.penCount,o.penColor=e.penColor,o.penWidth=e.penWidth,o.tool=e.isStraight?"draw:line":"draw",o.isKaleido=e.isKaleido,o.penKind=e.isEraser?"eraser":"normal",n.addEventListener("touchmove",s=>{s.preventDefault()}),o.listenRequestZoom(s=>{o.coord=o.coord.clone({scale:s})}),o.listenRequestScrollTo(s=>{o.coord=o.coord.clone({scroll:s})}),o.listenRequestRotateTo(s=>{o.coord=o.coord.clone({angle:s})}),o.listenRequestUndo(()=>{o.undo()}),o.listenRequestAnchorTransform(({coord:s,target:i})=>{i==="root"&&(o.anchor=s),i==="child"&&(o.childAnchor=s)}),o.listenRequestAnchorReset(()=>{o.anchor=new A.exports.Coordinate})}),C(()=>[e.$state.penColor],()=>{!a||(a.penColor=e.$state.penColor)}),C(()=>[e.$state.penCount],()=>{!a||(a.penCount=e.$state.penCount)}),C(()=>[e.$state.penWidth],()=>{!a||(a.penWidth=e.$state.penWidth)}),C(()=>[e.$state.isStraight],()=>{!a||(a.tool=e.isStraight?"draw:line":"draw")}),C(()=>[e.$state.isKaleido],()=>{!a||(a.isKaleido=e.isKaleido)}),C(()=>[e.$state.isEraser],()=>{!a||(a.penKind=e.isEraser?"eraser":"normal")}),C(()=>[e.$state.penOpacity],()=>{!a||(a.penAlpha=e.$state.penOpacity/100)}),(n,o)=>(v(),_("div",{class:"PaintCanvas",ref:(s,i)=>{i.el=s,t.value=s}},null,512))}});var pe=$(me,[["__scopeId","data-v-5ee146b7"]]);const ve={class:"content"},_e={key:1,class:"label"},fe=y({props:{icon:null,label:null,checked:{type:Boolean,default:!1},edge:{default:"both"},disabled:{type:Boolean,default:!1}},emits:["check"],setup(l,{emit:e}){const t=l,a=()=>{e("check",!t.checked)},n=g(()=>({borderRadius:{left:[!0,!1,!1,!0],right:[!1,!0,!0,!1],both:[!0,!0,!0,!0],none:[!1,!1,!1,!1]}[t.edge].map(s=>s?"4px":"0").join(" "),borderRightWidth:t.edge==="right"||t.edge==="both"?"1px":"0"}));return(o,s)=>(v(),_("button",{class:B(["PaletteItem",{PaletteItem__disabled:l.disabled}]),style:k(M({backgroundColor:l.checked?"#ddd":"#fff"},u(n))),onClick:a},[l.icon?(v(),_("span",{key:0,class:"icon",style:k({backgroundImage:`url(${l.icon})`})},null,4)):S("",!0),f("div",ve,[W(o.$slots,"default",{},void 0,!0)]),l.label?(v(),_("span",_e,N(l.label),1)):S("",!0)],6))}});var P=$(fe,[["__scopeId","data-v-020f556e"]]);const ge={class:"CheckItem"},R=y({props:{modelValue:{type:Boolean},label:{default:""},icon:null,edge:null},emits:["update:modelValue"],setup(l,{emit:e}){const t=a=>{e("update:modelValue",a)};return(a,n)=>(v(),_("div",ge,[p(P,{label:l.label,icon:l.icon,checked:l.modelValue,edge:l.edge,onCheck:t},{default:H(()=>[W(a.$slots,"default")]),_:3},8,["label","icon","checked","edge"])]))}});const be=["value"],Ve=y({props:{modelValue:null},emits:["update:modelValue"],setup(l,{emit:e}){const t=U(),a=()=>{var o;(o=t.value)==null||o.click()},n=o=>{e("update:modelValue",o.target.value)};return(o,s)=>(v(),_("div",{class:"ColorSelector",onClick:a},[f("div",{class:"view",style:k({backgroundColor:l.modelValue})},null,4),f("input",{type:"color",ref:(i,b)=>{b.inp=i,t.value=i},value:l.modelValue,onInput:s[0]||(s[0]=i=>n(i))},null,40,be)]))}});var Ie=$(Ve,[["__scopeId","data-v-7026f836"]]);const he={class:"ColorSelectItem"},ye=y({props:{modelValue:null,checked:{type:Boolean,default:!1},icon:null,edge:null},emits:["update:modelValue","update:checked"],setup(l,{emit:e}){const t=l,a=g({get:()=>t.modelValue,set:o=>{e("update:modelValue",o)}}),n=g({get:()=>t.checked,set:o=>{e("update:checked",o)}});return(o,s)=>(v(),_("div",he,[p(R,{icon:l.icon,edge:l.edge,modelValue:u(n),"onUpdate:modelValue":s[1]||(s[1]=i=>h(n)?n.value=i:null)},{default:H(()=>[p(Ie,{modelValue:u(a),"onUpdate:modelValue":s[0]||(s[0]=i=>h(a)?a.value=i:null)},null,8,["modelValue"])]),_:1},8,["icon","edge","modelValue"])]))}}),F=(l,e,t)=>Math.max(e,Math.min(t,l)),j=(l,e,t=0)=>t+Math.round((l-t)/e)*e,G=async l=>new Promise(e=>{setTimeout(e,l)});const Ce={class:"Slider"},$e={class:"label"},Oe={class:"value"},ke=y({props:{min:{default:0},max:{default:100},step:{default:1},modelValue:null,label:{default:""}},emits:["update:modelValue","close"],setup(l,{emit:e}){const t=l,a=120,n=w({isDragging:!1}),o=g(()=>(t.modelValue-t.min)/(t.max-t.min)),s=m=>{const r=F(m.offsetX/a,0,1),d=j(t.min+r*(t.max-t.min),t.step,t.min);e("update:modelValue",d)},i=m=>{s(m),n.isDragging=!0},b=m=>{!n.isDragging||s(m)},V=async m=>{!n.isDragging||(s(m),n.isDragging=!1,await G(200),I())},I=()=>{e("close")};return(m,r)=>(v(),_("div",Ce,[f("span",$e,N(l.label),1),f("div",{class:"bar",onPointerdown:i,onPointermove:b,onPointercancel:V,onPointerup:V},[f("div",{class:"fill",style:k({transform:`scaleX(${u(o)})`})},null,4),f("div",Oe,N(l.modelValue),1)],32)]))}});var Se=$(ke,[["__scopeId","data-v-6efacb8b"]]);const Y=(l,e,t)=>{document.body.style.cursor="ew-resize";const a=l.screenX;let n=!1;const o=i=>{i.preventDefault();const b=i.screenX-a;e(b),n=!0},s=()=>{document.body.removeEventListener("pointermove",o),document.body.removeEventListener("pointerup",s),document.body.removeEventListener("pointercancel",s),document.body.style.cursor="",t(n)};document.body.addEventListener("pointermove",o),document.body.addEventListener("pointerup",s),document.body.addEventListener("pointercancel",s)},Z=K("toolbar",{state:()=>({activeItemId:""})});const Ne={class:"SliderItem"},xe={key:0,class:"slider"},Ee=y({props:{min:{default:0},max:{default:100},modelValue:null,step:{default:1},label:{default:""},unit:{default:""},icon:null,edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:e}){const t=l,a=Z(),n=`slider-${Math.random()}`,o=w({startValue:0,isSliderVisible:!1}),s=120;C(()=>a.$state.activeItemId,()=>{a.$state.activeItemId!==n&&(o.isSliderVisible=!1)});const i=()=>{a.$state.activeItemId===n&&(a.$state.activeItemId="")};C(()=>t.disabled,()=>{t.disabled&&i()});const b=I=>{o.startValue=t.modelValue,o.isSliderVisible=!0,a.$state.activeItemId=n,Y(I,m=>{const r=s/(t.max-t.min),d=F(j(o.startValue+m/r,t.step,t.min),t.min,t.max);e("update:modelValue",d)},m=>{m&&i()})},V=I=>{t.disabled||(o.isSliderVisible?i():b(I))};return(I,m)=>(v(),_("div",Ne,[p(P,{onPointerdown:q(V,["prevent"]),label:`${l.modelValue}${l.unit}`,icon:l.icon,edge:l.edge,disabled:l.disabled},null,8,["onPointerdown","label","icon","edge","disabled"]),u(o).isSliderVisible?(v(),_("div",xe,[p(Se,{modelValue:l.modelValue,"onUpdate:modelValue":m[0]||(m[0]=r=>h(modelValue)?modelValue.value=r:null),label:l.label,min:l.min,max:l.max,onClose:i},null,8,["modelValue","label","min","max"])])):S("",!0)]))}});var x=$(Ee,[["__scopeId","data-v-30fb6702"]]);const we=(l,e,t)=>Math.max(e,Math.min(t,l)),Pe=(l,e,t=0)=>t+Math.round((l-t)/e)*e;const Re={class:"SwitchList"},De={class:"label"},Le={class:"list"},Te=["onClick"],Me=y({props:{options:{default:()=>[]},modelValue:null,label:null},emits:["update:modelValue","close"],setup(l,{emit:e}){const t=async a=>{e("update:modelValue",a),await G(200),e("close")};return(a,n)=>(v(),_("div",Re,[f("div",De,N(l.label),1),f("ul",Le,[(v(!0),_(X,null,se(l.options,o=>(v(),_("li",{key:o.key,class:B(["opt",{selected:o.key===l.modelValue}]),onClick:s=>t(o.key)},[o.icon?(v(),_("div",{key:0,class:"icon",style:k({backgroundImage:`url(${o.icon})`})},null,4)):S("",!0)],10,Te))),128))])]))}});var Ke=$(Me,[["__scopeId","data-v-6b01e8e9"]]);const Ue={class:"SwitchItem"},Ae={class:"list"},We=y({props:{modelValue:null,options:{default:()=>[]},label:{default:""},edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:e}){const t=l,a=g(()=>t.options.find(r=>r.key===t.modelValue)),n=g(()=>t.options.findIndex(r=>r.key===t.modelValue)),o=Z(),s=`switch-${Math.random()}`,i=w({startIndex:0,isListVisible:!1}),b=120;C(()=>o.$state.activeItemId,()=>{o.$state.activeItemId!==s&&(i.isListVisible=!1)});const V=()=>{o.$state.activeItemId===s&&(o.$state.activeItemId="")};C(()=>t.disabled,()=>{t.disabled&&V()});const I=r=>{i.startIndex=n.value,i.isListVisible=!0,o.$state.activeItemId=s,Y(r,d=>{const c=b,E=we(Pe(i.startIndex+d/c,1,0),0,t.options.length-1);e("update:modelValue",t.options[E].key)},d=>{d&&V()})},m=r=>{t.disabled||(i.isListVisible?V():I(r))};return(r,d)=>{var c;return v(),_("div",Ue,[p(P,{onPointerdown:q(m,["prevent"]),icon:(c=u(a))==null?void 0:c.icon,edge:l.edge,disabled:l.disabled},null,8,["onPointerdown","icon","edge","disabled"]),ie(f("div",Ae,[p(Ke,{label:l.label,options:l.options,modelValue:l.modelValue,"onUpdate:modelValue":d[0]||(d[0]=E=>h(modelValue)?modelValue.value=E:null),onClose:V},null,8,["label","options","modelValue"])],512),[[de,u(i).isListVisible]])])}}});var D=$(We,[["__scopeId","data-v-a4ac34de"]]),Be="./assets/icon-2nd.13ec10c0.svg",He="./assets/icon-count.9ae1b66e.svg",qe="./assets/icon-eraser.7664c25e.svg",Xe="./assets/icon-freehand.e3df7b88.svg",ze="./assets/icon-line.0152de6b.svg",Fe="./assets/icon-mode-kaleido.8c775bc4.svg",je="./assets/icon-mode-mirror.48827dff.svg",Ge="./assets/icon-opacity.a452034f.svg",Ye="./assets/icon-pen.313aa16f.svg",Ze="./assets/icon-width.8fa32cc7.svg";const Je=Be,Qe=He,et=qe,J=Xe,Q=ze,ee=Fe,te=je,tt=Ge,ot=Ye,lt=Ze;var O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ICON_2ND:Je,ICON_COUNT:Qe,ICON_ERASER:et,ICON_FREEHAND:J,ICON_LINE:Q,ICON_MODE_KALEIDO:ee,ICON_MODE_MIRROR:te,ICON_OPACITY:tt,ICON_PEN:ot,ICON_WIDTH:lt});const nt={class:"Toolbar"},at={class:"radioGroup"},st={class:"radioGroup"},it={class:"radioGroup"},dt={class:"radioGroup"},rt=y({setup(l){const e=z(),t=g({set:r=>{e.penCount=[r,e.penCount[1]]},get:()=>e.penCount[0]}),a=g({set:r=>{e.penCount=[e.penCount[0],r]},get:()=>e.penCount[1]}),n=g({set:r=>{a.value=r?t.value:0},get:()=>a.value>=1}),o=[{key:"line",label:"line",icon:Q},{key:"free",label:"free",icon:J}],s=g({set:r=>{e.isStraight=r==="line"},get:()=>e.isStraight?"line":"free"}),i=g({set:r=>{e.isEraser=r},get:()=>e.isEraser}),b=g({set:r=>{i.value=!r},get:()=>!i.value}),V=[{key:"mirror",label:"mirror",icon:te},{key:"kaleido",label:"kaleido",icon:ee}],I=g({set:r=>{e.isKaleido=[r==="kaleido",e.isKaleido[1]]},get:()=>e.isKaleido[0]?"kaleido":"mirror"}),m=g({set:r=>{e.isKaleido=[e.isKaleido[0],r==="kaleido"]},get:()=>e.isKaleido[1]?"kaleido":"mirror"});return(r,d)=>(v(),_("div",nt,[f("div",at,[p(ye,{modelValue:u(e).$state.penColor,"onUpdate:modelValue":d[0]||(d[0]=c=>u(e).$state.penColor=c),checked:u(b),"onUpdate:checked":d[1]||(d[1]=c=>h(b)?b.value=c:null),edge:"left",icon:u(O).ICON_PEN},null,8,["modelValue","checked","icon"]),p(R,{modelValue:u(i),"onUpdate:modelValue":d[2]||(d[2]=c=>h(i)?i.value=c:null),edge:"right",icon:u(O).ICON_ERASER},null,8,["modelValue","icon"])]),f("div",st,[p(x,{modelValue:u(e).penOpacity,"onUpdate:modelValue":d[3]||(d[3]=c=>u(e).penOpacity=c),label:"Opacity",icon:u(O).ICON_OPACITY,min:1,max:100,edge:"left"},null,8,["modelValue","icon"]),p(x,{modelValue:u(e).penWidth,"onUpdate:modelValue":d[4]||(d[4]=c=>u(e).penWidth=c),label:"Width",icon:u(O).ICON_WIDTH,min:1,max:50,edge:"none"},null,8,["modelValue","icon"]),p(D,{label:"LineType",modelValue:u(s),"onUpdate:modelValue":d[5]||(d[5]=c=>h(s)?s.value=c:null),options:o,edge:"right"},null,8,["modelValue"])]),f("div",it,[p(x,{modelValue:u(t),"onUpdate:modelValue":d[6]||(d[6]=c=>h(t)?t.value=c:null),label:"PenCount",icon:u(O).ICON_COUNT,min:1,max:16,edge:"left"},null,8,["modelValue","icon"]),p(D,{label:"MirrorType",modelValue:u(I),"onUpdate:modelValue":d[7]||(d[7]=c=>h(I)?I.value=c:null),options:V,edge:"right"},null,8,["modelValue"])]),f("div",dt,[p(R,{modelValue:u(n),"onUpdate:modelValue":d[8]||(d[8]=c=>h(n)?n.value=c:null),edge:"left",icon:u(O).ICON_2ND},null,8,["modelValue","icon"]),p(x,{modelValue:u(a),"onUpdate:modelValue":d[9]||(d[9]=c=>h(a)?a.value=c:null),label:"PenCount",icon:u(O).ICON_COUNT,min:1,max:16,edge:"none",disabled:!u(n)},null,8,["modelValue","icon","disabled"]),p(D,{label:"MirrorType",modelValue:u(m),"onUpdate:modelValue":d[10]||(d[10]=c=>h(m)?m.value=c:null),options:V,edge:"right",disabled:!u(n)},null,8,["modelValue","disabled"])])]))}});var ut=$(rt,[["__scopeId","data-v-7bc12de0"]]);const ct={class:"toolbar"},mt={class:"canvas"},pt=y({setup(l){return(e,t)=>(v(),_(X,null,[f("div",ct,[p(ut)]),f("div",mt,[p(pe)])],64))}});var vt=$(pt,[["__scopeId","data-v-24c191c4"]]);re(vt).use(ue()).mount("#app");
