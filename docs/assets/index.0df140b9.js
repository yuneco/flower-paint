var le=Object.defineProperty;var D=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var T=(l,e,t)=>e in l?le(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,M=(l,e)=>{for(var t in e||(e={}))ne.call(e,t)&&T(l,t,e[t]);if(D)for(var t of D(e))ae.call(e,t)&&T(l,t,e[t]);return l};import{d as K,a as V,r as U,o as se,b as A,w as I,c as v,e as _,f as g,n as k,g as N,h as f,i as W,t as x,j as B,u as r,k as p,l as H,m as y,p as w,q,F as X,s as ie,v as de,x as re,y as ce,z as ue}from"./vendor.eebc7a44.js";const me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};me();const z=K("canvas",{state:()=>({penColor:"#3399aa",penCount:[6,0],isKaleido:[!0,!0],penWidth:20,isStraight:!1,isEraser:!1,penOpacity:100})});var $=(l,e)=>{const t=l.__vccOpts||l;for(const[a,n]of e)t[a]=n;return t};const pe=V({setup(l){const e=z(),t=U();let a;return se(()=>{console.log("moun");const n=t.value;if(!n)return;const o=a=new A.exports.PaintCanvas(n,n.offsetWidth,n.offsetHeight);o.penCount=e.penCount,o.penColor=e.penColor,o.penWidth=e.penWidth,o.tool=e.isStraight?"draw:line":"draw",o.isKaleido=e.isKaleido,o.penKind=e.isEraser?"eraser":"normal",n.addEventListener("touchmove",s=>{s.preventDefault()}),o.listenRequestZoom(s=>{o.coord=o.coord.clone({scale:s})}),o.listenRequestScrollTo(s=>{o.coord=o.coord.clone({scroll:s})}),o.listenRequestRotateTo(s=>{o.coord=o.coord.clone({angle:s})}),o.listenRequestUndo(()=>{o.undo()}),o.listenRequestAnchorTransform(({coord:s,target:d})=>{d==="root"&&(o.anchor=s),d==="child"&&(o.childAnchor=s)}),o.listenRequestAnchorReset(()=>{o.anchor=new A.exports.Coordinate})}),I(()=>[e.$state.penColor],()=>{!a||(a.penColor=e.$state.penColor)}),I(()=>[e.$state.penCount],()=>{!a||(a.penCount=e.$state.penCount)}),I(()=>[e.$state.penWidth],()=>{!a||(a.penWidth=e.$state.penWidth)}),I(()=>[e.$state.isStraight],()=>{!a||(a.tool=e.isStraight?"draw:line":"draw")}),I(()=>[e.$state.isKaleido],()=>{!a||(a.isKaleido=e.isKaleido)}),I(()=>[e.$state.isEraser],()=>{!a||(a.penKind=e.isEraser?"eraser":"normal")}),I(()=>[e.$state.penOpacity],()=>{!a||(a.penAlpha=e.$state.penOpacity/100)}),(n,o)=>(v(),_("div",{class:"PaintCanvas",ref:(s,d)=>{d.el=s,t.value=s}},null,512))}});var ve=$(pe,[["__scopeId","data-v-5ee146b7"]]);const _e={class:"content"},fe={key:1,class:"label"},ge=V({props:{icon:null,label:null,checked:{type:Boolean,default:!1},edge:{default:"both"},disabled:{type:Boolean,default:!1}},emits:["check"],setup(l,{emit:e}){const t=l,a=()=>{e("check",!t.checked)},n=g(()=>({borderRadius:{left:[!0,!1,!1,!0],right:[!1,!0,!0,!1],both:[!0,!0,!0,!0],none:[!1,!1,!1,!1]}[t.edge].map(s=>s?"4px":"0").join(" "),borderRightWidth:t.edge==="right"||t.edge==="both"?"1px":"0"}));return(o,s)=>(v(),_("button",{class:B(["PaletteItem",{PaletteItem__disabled:l.disabled}]),style:k(M({backgroundColor:l.checked?"#ddd":"#fff"},r(n))),onClick:a},[l.icon?(v(),_("span",{key:0,class:"icon",style:k({backgroundImage:`url(${l.icon})`})},null,4)):N("",!0),f("div",_e,[W(o.$slots,"default",{},void 0,!0)]),l.label?(v(),_("span",fe,x(l.label),1)):N("",!0)],6))}});var L=$(ge,[["__scopeId","data-v-020f556e"]]);const be={class:"CheckItem"},P=V({props:{modelValue:{type:Boolean},label:{default:""},icon:null,edge:null},emits:["update:modelValue"],setup(l,{emit:e}){const t=a=>{e("update:modelValue",a)};return(a,n)=>(v(),_("div",be,[p(L,{label:l.label,icon:l.icon,checked:l.modelValue,edge:l.edge,onCheck:t},{default:H(()=>[W(a.$slots,"default")]),_:3},8,["label","icon","checked","edge"])]))}});const he=["value"],Ve=V({props:{modelValue:null},emits:["update:modelValue"],setup(l,{emit:e}){const t=U(),a=()=>{var o;(o=t.value)==null||o.click()},n=o=>{e("update:modelValue",o.target.value)};return(o,s)=>(v(),_("div",{class:"ColorSelector",onClick:a},[f("div",{class:"view",style:k({backgroundColor:l.modelValue})},null,4),f("input",{type:"color",ref:(d,b)=>{b.inp=d,t.value=d},value:l.modelValue,onInput:s[0]||(s[0]=d=>n(d))},null,40,he)]))}});var Ie=$(Ve,[["__scopeId","data-v-7026f836"]]);const ye={class:"ColorSelectItem"},Ce=V({props:{modelValue:null,checked:{type:Boolean,default:!1},icon:null,edge:null},emits:["update:modelValue","update:checked"],setup(l,{emit:e}){const t=l,a=g({get:()=>t.modelValue,set:o=>{e("update:modelValue",o)}}),n=g({get:()=>t.checked,set:o=>{e("update:checked",o)}});return(o,s)=>(v(),_("div",ye,[p(P,{icon:l.icon,edge:l.edge,modelValue:r(n),"onUpdate:modelValue":s[1]||(s[1]=d=>y(n)?n.value=d:null)},{default:H(()=>[p(Ie,{modelValue:r(a),"onUpdate:modelValue":s[0]||(s[0]=d=>y(a)?a.value=d:null)},null,8,["modelValue"])]),_:1},8,["icon","edge","modelValue"])]))}}),F=(l,e,t)=>Math.max(e,Math.min(t,l)),j=(l,e,t=0)=>t+Math.round((l-t)/e)*e,G=async l=>new Promise(e=>{setTimeout(e,l)});const $e={class:"Slider"},Oe={class:"label"},ke={class:"value"},Se=V({props:{min:{default:0},max:{default:100},step:{default:1},modelValue:null,label:{default:""}},emits:["update:modelValue","close"],setup(l,{emit:e}){const t=l,a=120,n=w({isDragging:!1}),o=g(()=>(t.modelValue-t.min)/(t.max-t.min)),s=m=>{const u=F(m.offsetX/a,0,1),i=j(t.min+u*(t.max-t.min),t.step,t.min);e("update:modelValue",i)},d=m=>{s(m),n.isDragging=!0},b=m=>{!n.isDragging||s(m)},h=async m=>{!n.isDragging||(s(m),n.isDragging=!1,await G(200),C())},C=()=>{e("close")};return(m,u)=>(v(),_("div",$e,[f("span",Oe,x(l.label),1),f("div",{class:"bar",onPointerdown:d,onPointermove:b,onPointercancel:h,onPointerup:h},[f("div",{class:"fill",style:k({transform:`scaleX(${r(o)})`})},null,4),f("div",ke,x(l.modelValue),1)],32)]))}});var Ne=$(Se,[["__scopeId","data-v-6efacb8b"]]);const Y=(l,e,t)=>{document.body.style.cursor="ew-resize";const a=l.screenX;let n=!1;const o=d=>{d.preventDefault();const b=d.screenX-a;e(b),n=!0},s=()=>{document.body.removeEventListener("pointermove",o),document.body.removeEventListener("pointerup",s),document.body.removeEventListener("pointercancel",s),document.body.style.cursor="",t(n)};document.body.addEventListener("pointermove",o),document.body.addEventListener("pointerup",s),document.body.addEventListener("pointercancel",s)},Z=K("toolbar",{state:()=>({activeItemId:""})});const xe={class:"SliderItem"},Ee={key:0,class:"slider"},we=V({props:{min:{default:0},max:{default:100},modelValue:null,step:{default:1},label:{default:""},unit:{default:""},icon:null,edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:e}){const t=l,a=Z(),n=`slider-${Math.random()}`,o=w({startValue:0,isSliderVisible:!1}),s=120;I(()=>a.$state.activeItemId,()=>{a.$state.activeItemId!==n&&(o.isSliderVisible=!1)});const d=()=>{a.$state.activeItemId===n&&(a.$state.activeItemId="")};I(()=>t.disabled,()=>{t.disabled&&d()});const b=m=>{o.startValue=t.modelValue,o.isSliderVisible=!0,a.$state.activeItemId=n,Y(m,u=>{const i=s/(t.max-t.min),c=F(j(o.startValue+u/i,t.step,t.min),t.min,t.max);e("update:modelValue",c)},u=>{u&&d()})},h=m=>{t.disabled||(o.isSliderVisible?d():b(m))},C=m=>{e("update:modelValue",m)};return(m,u)=>(v(),_("div",xe,[p(L,{onPointerdown:q(h,["prevent"]),label:`${l.modelValue}${l.unit}`,icon:l.icon,edge:l.edge,disabled:l.disabled},null,8,["onPointerdown","label","icon","edge","disabled"]),r(o).isSliderVisible?(v(),_("div",Ee,[p(Ne,{modelValue:l.modelValue,"onUpdate:modelValue":C,label:l.label,min:l.min,max:l.max,onClose:d},null,8,["modelValue","label","min","max"])])):N("",!0)]))}});var E=$(we,[["__scopeId","data-v-fdc1f02c"]]);const Le=(l,e,t)=>Math.max(e,Math.min(t,l)),Pe=(l,e,t=0)=>t+Math.round((l-t)/e)*e;const Re={class:"SwitchList"},De={class:"label"},Te={class:"list"},Me=["onClick"],Ke=V({props:{options:{default:()=>[]},modelValue:null,label:null},emits:["update:modelValue","close"],setup(l,{emit:e}){const t=async a=>{e("update:modelValue",a),await G(200),e("close")};return(a,n)=>(v(),_("div",Re,[f("div",De,x(l.label),1),f("ul",Te,[(v(!0),_(X,null,ie(l.options,o=>(v(),_("li",{key:o.key,class:B(["opt",{selected:o.key===l.modelValue}]),onClick:s=>t(o.key)},[o.icon?(v(),_("div",{key:0,class:"icon",style:k({backgroundImage:`url(${o.icon})`})},null,4)):N("",!0)],10,Me))),128))])]))}});var Ue=$(Ke,[["__scopeId","data-v-6b01e8e9"]]);const Ae={class:"SwitchItem"},We={class:"list"},Be=V({props:{modelValue:null,options:{default:()=>[]},label:{default:""},edge:null,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:e}){const t=l,a=g(()=>t.options.find(i=>i.key===t.modelValue)),n=g(()=>t.options.findIndex(i=>i.key===t.modelValue)),o=Z(),s=`switch-${Math.random()}`,d=w({startIndex:0,isListVisible:!1}),b=120;I(()=>o.$state.activeItemId,()=>{o.$state.activeItemId!==s&&(d.isListVisible=!1)});const h=()=>{o.$state.activeItemId===s&&(o.$state.activeItemId="")};I(()=>t.disabled,()=>{t.disabled&&h()});const C=i=>{d.startIndex=n.value,d.isListVisible=!0,o.$state.activeItemId=s,Y(i,c=>{const S=b,oe=Le(Pe(d.startIndex+c/S,1,0),0,t.options.length-1);e("update:modelValue",t.options[oe].key)},c=>{c&&h()})},m=i=>{t.disabled||(d.isListVisible?h():C(i))},u=i=>{e("update:modelValue",i)};return(i,c)=>{var S;return v(),_("div",Ae,[p(L,{onPointerdown:q(m,["prevent"]),icon:(S=r(a))==null?void 0:S.icon,edge:l.edge,disabled:l.disabled},null,8,["onPointerdown","icon","edge","disabled"]),de(f("div",We,[p(Ue,{label:l.label,options:l.options,modelValue:l.modelValue,"onUpdate:modelValue":u,onClose:h},null,8,["label","options","modelValue"])],512),[[re,r(d).isListVisible]])])}}});var R=$(Be,[["__scopeId","data-v-004e3a7c"]]),He="./assets/icon-2nd.13ec10c0.svg",qe="./assets/icon-count.9ae1b66e.svg",Xe="./assets/icon-eraser.7664c25e.svg",ze="./assets/icon-freehand.e3df7b88.svg",Fe="./assets/icon-line.0152de6b.svg",je="./assets/icon-mode-kaleido.8c775bc4.svg",Ge="./assets/icon-mode-mirror.48827dff.svg",Ye="./assets/icon-opacity.a452034f.svg",Ze="./assets/icon-pen.313aa16f.svg",Je="./assets/icon-width.8fa32cc7.svg";const Qe=He,et=qe,tt=Xe,J=ze,Q=Fe,ee=je,te=Ge,ot=Ye,lt=Ze,nt=Je;var O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ICON_2ND:Qe,ICON_COUNT:et,ICON_ERASER:tt,ICON_FREEHAND:J,ICON_LINE:Q,ICON_MODE_KALEIDO:ee,ICON_MODE_MIRROR:te,ICON_OPACITY:ot,ICON_PEN:lt,ICON_WIDTH:nt});const at={class:"Toolbar"},st={class:"radioGroup"},it={class:"radioGroup"},dt={class:"radioGroup"},rt={class:"radioGroup"},ct=V({setup(l){const e=z(),t=g({set:u=>{e.penCount=[u,e.penCount[1]]},get:()=>e.penCount[0]}),a=g({set:u=>{e.penCount=[e.penCount[0],u]},get:()=>e.penCount[1]}),n=g({set:u=>{a.value=u?t.value:0},get:()=>a.value>=1}),o=[{key:"line",label:"line",icon:Q},{key:"free",label:"free",icon:J}],s=g({set:u=>{e.isStraight=u==="line"},get:()=>e.isStraight?"line":"free"}),d=g({set:u=>{e.isEraser=u},get:()=>e.isEraser}),b=g({set:u=>{d.value=!u},get:()=>!d.value}),h=[{key:"mirror",label:"mirror",icon:te},{key:"kaleido",label:"kaleido",icon:ee}],C=g({set:u=>{e.isKaleido=[u==="kaleido",e.isKaleido[1]]},get:()=>e.isKaleido[0]?"kaleido":"mirror"}),m=g({set:u=>{e.isKaleido=[e.isKaleido[0],u==="kaleido"]},get:()=>e.isKaleido[1]?"kaleido":"mirror"});return(u,i)=>(v(),_("div",at,[f("div",st,[p(Ce,{modelValue:r(e).$state.penColor,"onUpdate:modelValue":i[0]||(i[0]=c=>r(e).$state.penColor=c),checked:r(b),"onUpdate:checked":i[1]||(i[1]=c=>y(b)?b.value=c:null),edge:"left",icon:r(O).ICON_PEN},null,8,["modelValue","checked","icon"]),p(P,{modelValue:r(d),"onUpdate:modelValue":i[2]||(i[2]=c=>y(d)?d.value=c:null),edge:"right",icon:r(O).ICON_ERASER},null,8,["modelValue","icon"])]),f("div",it,[p(E,{modelValue:r(e).penOpacity,"onUpdate:modelValue":i[3]||(i[3]=c=>r(e).penOpacity=c),label:"Opacity",icon:r(O).ICON_OPACITY,min:1,max:100,edge:"left"},null,8,["modelValue","icon"]),p(E,{modelValue:r(e).penWidth,"onUpdate:modelValue":i[4]||(i[4]=c=>r(e).penWidth=c),label:"Width",icon:r(O).ICON_WIDTH,min:1,max:50,edge:"none"},null,8,["modelValue","icon"]),p(R,{label:"LineType",modelValue:r(s),"onUpdate:modelValue":i[5]||(i[5]=c=>y(s)?s.value=c:null),options:o,edge:"right"},null,8,["modelValue"])]),f("div",dt,[p(E,{modelValue:r(t),"onUpdate:modelValue":i[6]||(i[6]=c=>y(t)?t.value=c:null),label:"PenCount",icon:r(O).ICON_COUNT,min:1,max:16,edge:"left"},null,8,["modelValue","icon"]),p(R,{label:"MirrorType",modelValue:r(C),"onUpdate:modelValue":i[7]||(i[7]=c=>y(C)?C.value=c:null),options:h,edge:"right"},null,8,["modelValue"])]),f("div",rt,[p(P,{modelValue:r(n),"onUpdate:modelValue":i[8]||(i[8]=c=>y(n)?n.value=c:null),edge:"left",icon:r(O).ICON_2ND},null,8,["modelValue","icon"]),p(E,{modelValue:r(a),"onUpdate:modelValue":i[9]||(i[9]=c=>y(a)?a.value=c:null),label:"PenCount",icon:r(O).ICON_COUNT,min:1,max:16,edge:"none",disabled:!r(n)},null,8,["modelValue","icon","disabled"]),p(R,{label:"MirrorType",modelValue:r(m),"onUpdate:modelValue":i[10]||(i[10]=c=>y(m)?m.value=c:null),options:h,edge:"right",disabled:!r(n)},null,8,["modelValue","disabled"])])]))}});var ut=$(ct,[["__scopeId","data-v-7bc12de0"]]);const mt={class:"toolbar"},pt={class:"canvas"},vt=V({setup(l){return(e,t)=>(v(),_(X,null,[f("div",mt,[p(ut)]),f("div",pt,[p(ve)])],64))}});var _t=$(vt,[["__scopeId","data-v-24c191c4"]]);ce(_t).use(ue()).mount("#app");
